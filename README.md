# gh-actions-sbs

# Go REST API Project

## –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

–ü—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –ø—Ä–æ—Å—Ç–æ–π REST API, –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã–π –Ω–∞ —è–∑—ã–∫–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è Go. –û—Å–Ω–æ–≤–Ω–∞—è —Ü–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞ ‚Äî –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –±–∞–∑–æ–≤—ã—Ö –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤ —Å–æ–∑–¥–∞–Ω–∏—è REST API, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ —Å –ø–æ–º–æ—â—å—é Swagger, –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Docker –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ —Å–±–æ—Ä–∫–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å –ø–æ–º–æ—â—å—é GitHub Actions.

## –§—É–Ω–∫—Ü–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞

1. **REST API**:
   - –î–≤–∞ —Ö–µ–Ω–¥–ª–µ—Ä–∞: `/hello` –∏ `/goodbye`, –∫–æ—Ç–æ—Ä—ã–µ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç JSON-–æ—Ç–≤–µ—Ç—ã —Å —Ç–µ–∫—Å—Ç–æ–º "Hello, World!" –∏ "Goodbye, World!" —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ.
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞ Gin –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –º–∞—Ä—à—Ä—É—Ç–æ–≤ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤.

2. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å –ø–æ–º–æ—â—å—é Swagger**:
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ API –≤ —Ñ–æ—Ä–º–∞—Ç–µ OpenAPI.
   - –î–æ—Å—Ç—É–ø –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ –º–∞—Ä—à—Ä—É—Ç `/swagger/index.html`.

3. **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è —Å Docker**:
   - –°–æ–∑–¥–∞–Ω–∏–µ Dockerfile –¥–ª—è —Å–±–æ—Ä–∫–∏ –∏ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ.
   - –£–ø—Ä–æ—â–µ–Ω–∏–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –∏ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è.

4. **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —Å GitHub Actions**:
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ CI/CD pipeline –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å–±–æ—Ä–∫–∏, —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –ø—É—à–µ –≤ –≤–µ—Ç–∫—É `main` –∏–ª–∏ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ pull request.
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Docker –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤ –∏ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ.

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Go**: –Ø–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è REST API.
- **Gin**: –í–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è Go, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –º–∞—Ä—à—Ä—É—Ç–æ–≤ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤.
- **Swagger**: –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ API –≤ —Ñ–æ—Ä–º–∞—Ç–µ OpenAPI.
- **Docker**: –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π.
- **GitHub Actions**: –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ CI/CD.

## –ú–µ—Ö–∞–Ω–∏–∑–º—ã

1. **–°–æ–∑–¥–∞–Ω–∏–µ REST API**:
   - –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–æ–≤ –∏ —Ö–µ–Ω–¥–ª–µ—Ä–æ–≤ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Gin.
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ JSON-–æ—Ç–≤–µ—Ç–æ–≤.

2. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏**:
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–π –¥–ª—è –æ–ø–∏—Å–∞–Ω–∏—è –º–∞—Ä—à—Ä—É—Ç–æ–≤ –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤.
   - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ñ–∞–π–ª–∞ `swagger.json` —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã `swag init`.

3. **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è**:
   - –°–æ–∑–¥–∞–Ω–∏–µ Dockerfile –¥–ª—è —Å–±–æ—Ä–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
   - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∏ —Å–±–æ—Ä–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ.
   - –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º.

4. **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è CI/CD**:
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ GitHub Actions –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å–±–æ—Ä–∫–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Docker –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤ –∏ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ.
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ workflow –ø—Ä–∏ –ø—É—à–µ –≤ –≤–µ—Ç–∫—É `main` –∏–ª–∏ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ pull request.

## –ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–≥–Ω–µ–Ω–∏—è —á–∞—Å—Ç–µ–π 1-3
go-rest-api/
‚îú‚îÄ‚îÄ Dockerfile
‚îú‚îÄ‚îÄ go.mod
‚îú‚îÄ‚îÄ go.sum
‚îú‚îÄ‚îÄ main.go
‚îú‚îÄ‚îÄ docs/
‚îÇ   ‚îú‚îÄ‚îÄ docs.go
‚îÇ   ‚îî‚îÄ‚îÄ swagger.json
‚îú‚îÄ‚îÄ tests/
‚îÇ   ‚îî‚îÄ‚îÄ main_test.go
‚îî‚îÄ‚îÄ .github/
‚îî‚îÄ‚îÄ workflows/
‚îî‚îÄ‚îÄ ci.yml

## –ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —á–∞—Å—Ç–∏ 4
go-rest-api/
‚îú‚îÄ‚îÄ cmd/
‚îÇ   ‚îî‚îÄ‚îÄ main.go
‚îú‚îÄ‚îÄ internal/
‚îÇ   ‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ handler.go
‚îÇ   ‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ config.go
‚îÇ   ‚îî‚îÄ‚îÄ swagger/
‚îÇ       ‚îî‚îÄ‚îÄ docs.go
‚îú‚îÄ‚îÄ pkg/
‚îÇ   ‚îî‚îÄ‚îÄ utils/
‚îÇ       ‚îî‚îÄ‚îÄ utils.go
‚îú‚îÄ‚îÄ docs/
‚îÇ   ‚îî‚îÄ‚îÄ swagger.json
‚îú‚îÄ‚îÄ tests/
‚îÇ   ‚îî‚îÄ‚îÄ main_test.go
‚îú‚îÄ‚îÄ Dockerfile
‚îú‚îÄ‚îÄ go.mod
‚îú‚îÄ‚îÄ go.sum
‚îî‚îÄ‚îÄ .github/
    ‚îî‚îÄ‚îÄ workflows/
        ‚îî‚îÄ‚îÄ ci.yml


## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

1. **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π**:
```sh
git clone https://github.com/yourusername/go-rest-api.git
cd go-rest-api
```

2. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```sh

go mod tidy
```

3. **–°–æ–±–µ—Ä–∏—Ç–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:
```sh

go run main.go
```

4. **–°–æ–±–µ—Ä–∏—Ç–µ Docker –æ–±—Ä–∞–∑ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä:
```sh

docker build -t go-rest-api .
docker run --rm -p 8080:8080 go-rest-api
```

5. **–û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ –∞–¥—Ä–µ—Å–∞–º:
http://localhost:8080/hello
http://localhost:8080/goodbye
http://localhost:8080/swagger/index.html (–¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ Swagger)

# –õ–∏—Ü–µ–Ω–∑–∏—è
–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ª–∏—Ü–µ–Ω–∑–∏—Ä–æ–≤–∞–Ω –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π MIT.



# –ß–∞—Å—Ç—å 01
–î–∞–≤–∞–π—Ç–µ —Å–æ–∑–¥–∞–¥–∏–º –ø—Ä–æ—Å—Ç–æ–π REST API –Ω–∞ Go —Å –ø–∞—Ä–æ–π —Ö–µ–Ω–¥–ª–µ—Ä–æ–≤ –∏ –±–µ–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö. –ó–∞—Ç–µ–º –º—ã –¥–æ–±–∞–≤–∏–º –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –Ω–∞–±–æ—Ä —Ç–µ—Å—Ç–æ–≤ –∏ –Ω–∞—Å—Ç—Ä–æ–∏–º GitHub Actions –¥–ª—è CI/CD –±–µ–∑ –ø—É—à–∞ –≤ Docker Hub.

## –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
–°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –Ω–µ–µ:
```sh
mkdir go-rest-api
cd go-rest-api
```

–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –Ω–æ–≤—ã–π –º–æ–¥—É–ª—å Go:
```sh
go mod init go-rest-api
```

## –®–∞–≥ 2: –°–æ–∑–¥–∞–Ω–∏–µ REST API

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª main.go –∏ –¥–æ–±–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–π –∫–æ–¥:
```go
package main

import (
    "encoding/json"
    "net/http"
)

type Message struct {
    Text string `json:"text"`
}

func helloHandler(w http.ResponseWriter, r *http.Request) {
    message := Message{Text: "Hello, World!"}
    json.NewEncoder(w).Encode(message)
}

func goodbyeHandler(w http.ResponseWriter, r *http.Request) {
    message := Message{Text: "Goodbye, World!"}
    json.NewEncoder(w).Encode(message)
}

func main() {
    http.HandleFunc("/hello", helloHandler)
    http.HandleFunc("/goodbye", goodbyeHandler)

    http.ListenAndServe(":8080", nil)
}
```


## –®–∞–≥ 3: –ù–∞–ø–∏—Å–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤
–°–æ–∑–¥–∞–π—Ç–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é —Ñ–∞–π–ª main_test.go:
```sh

 main_test.go
```

–£—Å—Ç–∞–Ω–æ–≤–∏ –ø–∞–∫–µ—Ç:
```sh
go get github.com/stretchr/testify/assert
```

–î–æ–±–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–π –∫–æ–¥ –≤ tests/main_test.go:
```go
package main

import (
	"net/http"
	"net/http/httptest"
	"testing"

	"github.com/stretchr/testify/assert"
)

func TestHelloHandler(t *testing.T) {
	req, err := http.NewRequest("GET", "/hello", nil)
	if err != nil {
		t.Fatal(err)
	}

	rr := httptest.NewRecorder()
	handler := http.HandlerFunc(HelloHandler)
	handler.ServeHTTP(rr, req)

	assert.Equal(t, http.StatusOK, rr.Code)
	assert.JSONEq(t, `{"text":"Hello GH Actions World!"}`, rr.Body.String())
}

func TestGoodbyeHandler(t *testing.T) {
	req, err := http.NewRequest("GET", "/goodbye", nil)
	if err != nil {
		t.Fatal(err)
	}

	rr := httptest.NewRecorder()
	handler := http.HandlerFunc(GoodbyeHandler)
	handler.ServeHTTP(rr, req)

	assert.Equal(t, http.StatusOK, rr.Code)
	assert.JSONEq(t, `{"text":"Goodbye GH Actions World!"}`, rr.Body.String())
}

```


## –®–∞–≥ 4: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ GitHub Actions
–°–æ–∑–¥–∞–π—Ç–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é .github/workflows –∏ —Ñ–∞–π–ª ci.yml –≤–Ω—É—Ç—Ä–∏ –Ω–µ–µ:
```sh

mkdir -p .github/workflows
touch .github/workflows/ci.yml
```

### –û–±—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
–§–∞–π–ª .github/workflows/ci.yml —è–≤–ª—è–µ—Ç—Å—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–º —Ñ–∞–π–ª–æ–º –¥–ª—è GitHub Actions. –û–Ω –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –∫–∞–∫ –∏ –∫–æ–≥–¥–∞ –¥–æ–ª–∂–Ω—ã –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏ (workflows) –≤ –≤–∞—à–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏. –í –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ, —ç—Ç–æ CI (Continuous Integration) pipeline, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –ø—Ä–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö —Å–æ–±—ã—Ç–∏—è—Ö.

–≠—Ç–æ—Ç —Ñ–∞–π–ª –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å —Å–±–æ—Ä–∫–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞. –ö–æ–≥–¥–∞ –≤—ã –¥–µ–ª–∞–µ—Ç–µ –ø—É—à –≤ –≤–µ—Ç–∫—É main –∏–ª–∏ —Å–æ–∑–¥–∞–µ—Ç–µ pull request –≤ —ç—Ç—É –≤–µ—Ç–∫—É, GitHub Actions –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:

–ö–ª–æ–Ω–∏—Ä—É–µ—Ç –≤–∞—à —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π.
–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç Go.
–ö–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç –≤–∞—à –ø—Ä–æ–µ–∫—Ç.
–ó–∞–ø—É—Å–∫–∞–µ—Ç –≤—Å–µ —Ç–µ—Å—Ç—ã.
–≠—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤–∞—à –∫–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∏ –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –æ—à–∏–±–æ–∫ –ø–µ—Ä–µ–¥ —Ç–µ–º, –∫–∞–∫ –æ–Ω –±—É–¥–µ—Ç –æ–±—ä–µ–¥–∏–Ω–µ–Ω –≤ –æ—Å–Ω–æ–≤–Ω—É—é –≤–µ—Ç–∫—É.

–î–æ–±–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–π –∫–æ–¥ –≤ ci.yml:
```yaml
name: CI

on:
  push:
    branches:
      - main
  pull_request:
    branches:
      - main

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout code
      uses: actions/checkout@v2

    - name: Set up Go
      uses: actions/setup-go@v2
      with:
        go-version: '1.18'

    - name: Build
      run: go build -v ./...

    - name: Test
      run: go test -v ./...
```


### –†–∞–∑–±–æ—Ä —Ñ–∞–π–ª–∞
```yaml
name: CI
```
name: –≠—Ç–æ –∏–º—è –≤–∞—à–µ–≥–æ workflow. –í –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ, –æ–Ω–æ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è "CI", —á—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç Continuous Integration.

```yaml
on:
  push:
    branches:
      - main
  pull_request:
    branches:
      - main
```
on: –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å–æ–±—ã—Ç–∏—è, –ø—Ä–∏ –∫–æ—Ç–æ—Ä—ã—Ö –±—É–¥–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è —ç—Ç–æ—Ç workflow.

push: Workflow –±—É–¥–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –ø—É—à–µ –≤ –≤–µ—Ç–∫—É main.

pull_request: Workflow –±—É–¥–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Å–æ–∑–¥–∞–Ω–∏–∏ pull request –≤ –≤–µ—Ç–∫—É main.


```yaml
jobs:
  build:
    runs-on: ubuntu-latest
```
jobs: –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –Ω–∞–±–æ—Ä –∑–∞–¥–∞—á (jobs), –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –≤ —ç—Ç–æ–º workflow.

build: –ò–º—è –∑–∞–¥–∞—á–∏. –í –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ, –∑–∞–¥–∞—á–∞ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è "build".

runs-on: –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—É—é —Å–∏—Å—Ç–µ–º—É, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–π –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –∑–∞–¥–∞—á–∞. –í –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ, —ç—Ç–æ ubuntu-latest, —á—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç –ø–æ—Å–ª–µ–¥–Ω—é—é –≤–µ—Ä—Å–∏—é Ubuntu.


```yaml
    steps:
    - name: Checkout code
      uses: actions/checkout@v2
```
steps: –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —à–∞–≥–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –≤ —ç—Ç–æ–π –∑–∞–¥–∞—á–µ.

name: –û–ø–∏—Å–∞–Ω–∏–µ —à–∞–≥–∞.

uses: –£–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫–æ–π action –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å. –í –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ, —ç—Ç–æ actions/checkout@v2, –∫–æ—Ç–æ—Ä—ã–π –∫–ª–æ–Ω–∏—Ä—É–µ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –≤ —Ä–∞–±–æ—á—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é.


```yaml
    - name: Set up Go
      uses: actions/setup-go@v2
      with:
        go-version: '1.18'
```
name: –û–ø–∏—Å–∞–Ω–∏–µ —à–∞–≥–∞.

uses: –£–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫–æ–π action –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å. –í –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ, —ç—Ç–æ actions/setup-go@v2, –∫–æ—Ç–æ—Ä—ã–π —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç Go –Ω–∞ —Ä–∞–±–æ—á—É—é –º–∞—à–∏–Ω—É.

with: –ü–µ—Ä–µ–¥–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ action. –í –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ, —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –≤–µ—Ä—Å–∏—è Go 1.18.

```yaml
    - name: Build
      run: go build -v ./...
```
name: –û–ø–∏—Å–∞–Ω–∏–µ —à–∞–≥–∞.

run: –ö–æ–º–∞–Ω–¥–∞, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –Ω–∞ —ç—Ç–æ–º —à–∞–≥–µ. –í –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ, —ç—Ç–æ go build -v ./..., –∫–æ—Ç–æ—Ä–∞—è –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç –≤—Å–µ –ø–∞–∫–µ—Ç—ã –≤ –ø—Ä–æ–µ–∫—Ç–µ.


```yaml
    - name: Test
      run: go test -v ./...
```
name: –û–ø–∏—Å–∞–Ω–∏–µ —à–∞–≥–∞.

run: –ö–æ–º–∞–Ω–¥–∞, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –Ω–∞ —ç—Ç–æ–º —à–∞–≥–µ. –í –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ, —ç—Ç–æ go test -v ./..., –∫–æ—Ç–æ—Ä–∞—è –∑–∞–ø—É—Å–∫–∞–µ—Ç –≤—Å–µ —Ç–µ—Å—Ç—ã –≤ –ø—Ä–æ–µ–∫—Ç–µ.




## –®–∞–≥ 5: –ó–∞–ø—É—Å–∫ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
–ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ:
```sh
go run main.go
```

–û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ –∞–¥—Ä–µ—Å–∞–º http://localhost:8080/hello –∏ http://localhost:8080/goodbye, —á—Ç–æ–±—ã —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ API —Ä–∞–±–æ—Ç–∞–µ—Ç.


–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç—ã –ª–æ–∫–∞–ª—å–Ω–æ:
```sh

go test -v ./...
```

## –®–∞–≥ 6: –ó–∞–ø—É—Å–∫ GitHub Actions
–°–æ–∑–¥–∞–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–∞ GitHub –∏ –∑–∞–≥—Ä—É–∑–∏—Ç–µ —Ç—É–¥–∞ –≤–∞—à –ø—Ä–æ–µ–∫—Ç.
GitHub Actions –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å—Ç–∏—Ç CI pipeline –ø—Ä–∏ –∫–∞–∂–¥–æ–º –ø—É—à–µ –≤ –≤–µ—Ç–∫—É main –∏–ª–∏ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏  pull request –≤ —ç—Ç—É –≤–µ—Ç–∫—É. –í—ã –º–æ–∂–µ—Ç–µ —Å–ª–µ–¥–∏—Ç—å –∑–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–æ–º –≤ —Ä–∞–∑–¥–µ–ª–µ "Actions" –≤–∞—à–µ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –Ω–∞ GitHub.

## –®–∞–≥ 7: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è, —Ç–∞–∫–∏–µ –∫–∞–∫ –ª–æ–≥–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, middleware –∏–ª–∏ –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–µ —Ç–µ—Å—Ç—ã, –≤—ã –º–æ–∂–µ—Ç–µ —Å–¥–µ–ª–∞—Ç—å —ç—Ç–æ —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:

### –õ–æ–≥–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:
–î–æ–±–∞–≤—å—Ç–µ –ø–∞–∫–µ—Ç log/slog –¥–ª—è –ª–æ–≥–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –æ—Ç–≤–µ—Ç–æ–≤.
```go
import (
    "log"
    "net/http"
)

func helloHandler(w http.ResponseWriter, r *http.Request) {
    log.Println("Received request at /hello")
    message := Message{Text: "Hello, World!"}
    json.NewEncoder(w).Encode(message)
}

func goodbyeHandler(w http.ResponseWriter, r *http.Request) {
    log.Println("Received request at /goodbye")
    message := Message{Text: "Goodbye, World!"}
    json.NewEncoder(w).Encode(message)
}
```

### Middleware:
–°–æ–∑–¥–∞–π—Ç–µ middleware –¥–ª—è –ª–æ–≥–≥–∏—Ä–æ–≤–∞–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤.
```go
func loggingMiddleware(next http.Handler) http.Handler {
    return http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
        start := time.Now()
        next.ServeHTTP(w, r)
        log.Printf("Method: %s, Path: %s, Duration: %v", r.Method, r.URL.Path, time.Since(start))
    })
}

func main() {
    http.Handle("/hello", loggingMiddleware(http.HandlerFunc(helloHandler)))
    http.Handle("/goodbye", loggingMiddleware(http.HandlerFunc(goodbyeHandler)))

    http.ListenAndServe(":8080", nil)
}
```


## –ë–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–µ —Ç–µ—Å—Ç—ã:
–î–æ–±–∞–≤—å—Ç–µ —Ç–µ—Å—Ç—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ middleware –∏ –¥—Ä—É–≥–∏—Ö –∞—Å–ø–µ–∫—Ç–æ–≤ –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
```go
func TestLoggingMiddleware(t *testing.T) {
    req, err := http.NewRequest("GET", "/hello", nil)
    if err != nil {
        t.Fatal(err)
    }

    rr := httptest.NewRecorder()
    handler := loggingMiddleware(http.HandlerFunc(helloHandler))
    handler.ServeHTTP(rr, req)

    assert.Equal(t, http.StatusOK, rr.Code)
    assert.Equal(t, `{"text":"Hello, World!"}`, rr.Body.String())
}
```


## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ
–¢–µ–ø–µ—Ä—å —É –≤–∞—Å –µ—Å—Ç—å –ø—Ä–æ—Å—Ç–æ–π REST API –Ω–∞ Go —Å –ø–∞—Ä–æ–π —Ö–µ–Ω–¥–ª–µ—Ä–æ–≤, –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º –Ω–∞–±–æ—Ä–æ–º —Ç–µ—Å—Ç–æ–≤ –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º GitHub Actions –¥–ª—è CI/CD. –í—ã –º–æ–∂–µ—Ç–µ —Ä–∞—Å—à–∏—Ä—è—Ç—å —ç—Ç–æ—Ç –ø—Ä–∏–º–µ—Ä, –¥–æ–±–∞–≤–ª—è—è –±–æ–ª—å—à–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏, —Ç–µ—Å—Ç–æ–≤ –∏ —É–ª—É—á—à–µ–Ω–∏–π –ø–æ –º–µ—Ä–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.



# –ß–∞—Å—Ç—å 2
–¥–∞–≤–∞–π –¥–æ–±–∞–≤–∏–º –∫ —ç—Ç–æ–º—É –ø—Ä–æ–µ–∫—Ç—É swagger

Swagger (OpenAPI) ‚Äî —ç—Ç–æ –º–æ—â–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ API. –î–∞–≤–∞–π—Ç–µ –¥–æ–±–∞–≤–∏–º Swagger –≤ –Ω–∞—à –ø—Ä–æ–µ–∫—Ç –Ω–∞ Go. –ú—ã –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫—É swaggo –∏ swaggo/swag –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ Swagger.

## –®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–∞–∫–µ—Ç—ã:
```sh
go get -u github.com/swaggo/swag/cmd/swag
go get -u github.com/swaggo/gin-swagger
go get -u github.com/swaggo/files
```

```sh
export PATH=$PATH:$(go env GOPATH)/bin
```


# –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Swagger

–ê–≤—Ç–æ–¥–æ–∫-–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ (auto-generated documentation comments) ‚Äî —ç—Ç–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ –∫–æ–¥–µ, –∫–æ—Ç–æ—Ä—ã–µ —Ä–∞—Å—Å—Ç–∞–≤–ª—è—é—Ç—Å—è –≤—Ä—É—á–Ω—É—é –≤–∞–º–∏, –Ω–æ –ø–æ –∑–∞—Ä–∞–Ω–µ–µ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–º—É —à–∞–±–ª–æ–Ω—É (—Å–∏–Ω—Ç–∞–∫—Å–∏—Å—É), –ø–æ–Ω—è—Ç–Ω–æ–º—É –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—É –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ (–≤ –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ ‚Äî —É—Ç–∏–ª–∏—Ç–µ swag).

–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

–í—ã –ø–∏—à–µ—Ç–µ –Ω–∞–¥ —Ñ—É–Ω–∫—Ü–∏–µ–π-—Ö–µ–Ω–¥–ª–µ—Ä–æ–º (–∏–ª–∏ –Ω–∞–¥ –ø–∞–∫–µ—Ç–æ–º) ¬´–º–µ—Ç–∞-–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏¬ª, –Ω–∞—á–∏–Ω–∞—é—â–∏–µ—Å—è —Å // @‚Ä¶.
–£—Ç–∏–ª–∏—Ç–∞ swag (–∫–æ–º–∞–Ω–¥–∞ swag init) —Å–∫–∞–Ω–∏—Ä—É–µ—Ç –≤–∞—à –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥, —Å–æ–±–∏—Ä–∞–µ—Ç —ç—Ç–∏ // @‚Ä¶-—Å—Ç—Ä–æ–∫–∏ –∏ –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç –∏—Ö –≤ —Ñ–∞–π–ª docs/swagger.json (–∏–ª–∏ swagger.yaml) –≤ —Ñ–æ—Ä–º–∞—Ç–µ OpenAPI/Swagger.
Swagger UI (–∫ –∫–æ—Ç–æ—Ä–æ–º—É –≤—ã –ø–æ–¥–∫–ª—é—á–∞–µ—Ç–µ—Å—è —á–µ—Ä–µ–∑ gin-swagger.WrapHandler) —á–∏—Ç–∞–µ—Ç —ç—Ç–æ—Ç JSON/YAML –∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –≤ –±—Ä–∞—É–∑–µ—Ä–µ.
–ü—Ä–∏–º–µ—Ä –∞–≤—Ç–æ–¥–æ–∫-–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –≤ –∫–æ–¥–µ (–≤–∑—è—Ç—ã–π –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –æ—Ç–≤–µ—Ç–∞):

```go

// @Summary      Hello World
// @Description  Returns a hello message
// @ID           helloHandler
// @Produce      json
// @Success      200  {object}  Message
// @Router       /hello [get]
func helloHandler(c *gin.Context) { ‚Ä¶ }
```
–†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö –º–µ—Ç–æ–∫ (@ tags):

@Summary ‚Äî –∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –º–µ—Ç–æ–¥–∞.
@Description ‚Äî –ø–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ.
@ID ‚Äî —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –æ–ø–µ—Ä–∞—Ü–∏–∏ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ Swagger).
@Accept / @Produce ‚Äî —Ñ–æ—Ä–º–∞—Ç—ã –≤—Ö–æ–¥—è—â–∏—Ö/–∏—Å—Ö–æ–¥—è—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö (json, xml –∏ —Ç. –¥.).
@Param ‚Äî –æ–ø–∏—Å–∞–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ (query, body, path –∏ –ø—Ä.).
@Success / @Failure ‚Äî –æ–ø–∏—Å–∞–Ω–∏–µ –≤–æ–∑–º–æ–∂–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ (–∫–æ–¥, —Ç–∏–ø, –º–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö).
@Router ‚Äî –ø—É—Ç—å –∏ HTTP-–º–µ—Ç–æ–¥ –≤ —Ñ–æ—Ä–º–∞—Ç–µ <path> [<method>].
–ü–ª—é—Å –æ–±—â–∏–µ –º–µ—Ç–∫–∏ –Ω–∞–¥ –ø–∞–∫–µ—Ç–æ–º/—Ñ–∞–π–ª–æ–º: @title, @version, @host, @BasePath –∏ –ø—Ä.
–û—Ç–∫—É–¥–∞ ¬´–≤—ã—Å—Ä–∞—Ç—å¬ª —à–∞–±–ª–æ–Ω –∞–≤—Ç–æ–¥–æ–∫-–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤?

–û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è swaggo:
https://github.com/swaggo/swag#declarative-comments-format
–ü—Ä–∏–º–µ—Ä—ã –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ gin-swagger:
https://github.com/swaggo/gin-swagger#usage
–í —Å–æ—Ä—Ü–∞—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤, –≥–¥–µ —É–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è swag: –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ, –∫–∞–∫ –æ—Ñ–æ—Ä–º–ª–µ–Ω—ã // @‚Ä¶ –≤ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö Go-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è—Ö.
–ö–∞–∫ –Ω–∞—á–∞—Ç—å:
a) –°—Ç–∞–≤–∏—Ç–µ swag –≤ PATH.
b) –í –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç–µ swag init ‚Äî –æ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç /docs.
c) –î–æ–ø–∏—Å—ã–≤–∞–µ—Ç–µ // @‚Ä¶-–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –≤–∞—à–∏–º —Ö–µ–Ω–¥–ª–µ—Ä–∞–º (–∏ –∫ –∫–æ—Ä–Ω—é –ø–∞–∫–µ—Ç–∞, —á—Ç–æ–±—ã –∑–∞–¥–∞—Ç—å –æ–±—â–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã API).
d) –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç–µ swag init, –æ–±–Ω–æ–≤–ª—è–µ—Ç–µ /docs/swagger.json.
e) –û—Ç–∫—Ä—ã–≤–∞–µ—Ç–µ UI –ø–æ /swagger/index.html.

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º ¬´–∞–≤—Ç–æ–¥–æ–∫-–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏¬ª ‚Äî —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ –≤–∞—à–∞ —Ä–∞–∑–º–µ—Ç–∫–∞ –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤ –ø–æ–¥ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä Swagger-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏.


–û–ø–∏—à–µ–º –∞–ø–∏ –≤ main.go
```go
// main.go
package main

import (
	"net/http"

	"github.com/gin-gonic/gin"
	_ "github.com/stevenstr/gh-actions-sbs/docs" // docs –≥–µ–Ω–µ—Ä–∏—Ç—Å—è swag-–æ–º
	swaggerFiles "github.com/swaggo/files"
	ginSwagger "github.com/swaggo/gin-swagger"
)

// Message ‚Äî —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–∞
type Message struct {
	Text string `json:"text"`
}

// @title           Simple API
// @version         1.0
// @description     This is a sample server.
// @termsOfService  http://example.com/terms/

// @contact.name   API Support
// @contact.url    http://www.example.com/support
// @contact.email  support@example.com

// @license.name  Apache 2.0
// @license.url   http://www.apache.org/licenses/LICENSE-2.0.html

// @host      localhost:8080
// @BasePath  /

// @Summary      Hello World
// @Description  Returns a hello message
// @ID           helloHandler
// @Produce      json
// @Success      200  {object}  Message
// @Router       /hello [get]
func helloHandler(c *gin.Context) {
	c.JSON(http.StatusOK, Message{Text: "Hello, World!"})
}

// @Summary      Goodbye World
// @Description  Returns a goodbye message
// @ID           goodbyeHandler
// @Produce      json
// @Success      200  {object}  Message
// @Router       /goodbye [get]
func goodbyeHandler(c *gin.Context) {
	c.JSON(http.StatusOK, Message{Text: "Goodbye, World!"})
}

func main() {
	r := gin.Default()

	r.GET("/hello", helloHandler)
	r.GET("/goodbye", goodbyeHandler)

	// –†–æ—É—Ç –¥–ª—è Swagger UI
	r.GET("/swagger/*any", ginSwagger.WrapHandler(swaggerFiles.Handler))

	r.Run(":8080")
}
```


## –®–∞–≥ 3: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
–°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é Swagger:
```sh

swag init
```
–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ —Å–æ–∑–¥–∞—Å—Ç —Ñ–∞–π–ª docs/swagger.json, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–¥–µ—Ä–∂–∏—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é API –≤ —Ñ–æ—Ä–º–∞—Ç–µ OpenAPI.

# –®–∞–≥ 4: –ó–∞–ø—É—Å–∫ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞
–ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:
```sh

go run main.go
```

–û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ –∞–¥—Ä–µ—Å—É http://localhost:8080/swagger/index.html, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é Swagger.



# –®–∞–≥ 5: –ó–∞–ø—É—Å–∫ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞
–ù–∏–∂–µ —Ä–∞–∑–±–µ—Ä—ë–º –ø—Ä–∏–º–µ—Ä ¬´—Å—Ç–∞—Ä—Ç–∞¬ª HTTP-—Å–µ—Ä–≤–µ—Ä–∞ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –ø–ª–∞–≤–Ω–æ–≥–æ (graceful) –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø–æ —à–∞–≥–∞–º.

```go
import (
    "context"
    "log"
    "net/http"
    "os"
    "os/signal"
    "syscall"
    "time"
    "github.com/gin-gonic/gin"
)
```

‚Äì –ü–∞–∫–µ—Ç net/http –∏ github.com/gin-gonic/gin –¥–ª—è –∑–∞–ø—É—Å–∫–∞ HTTP-—Å–µ—Ä–≤–µ—Ä–∞.
‚Äì context, os/signal, syscall, time ‚Äì –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ graceful-shutdown.
‚Äì log ‚Äì –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è.

```go
func main() {
  // 1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º Gin —Å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º–∏ middleware (Logger, Recovery)
	router := gin.Default()

   // 2. –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º –ª—é–±—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
	router.GET("/hello", helloHandler)
	router.GET("/goodbye", goodbyeHandler)

	// –†–æ—É—Ç –¥–ª—è Swagger UI
	router.GET("/swagger/*any", ginSwagger.WrapHandler(swaggerFiles.Handler))

  // 3. –û–±–æ—Ä–∞—á–∏–≤–∞–µ–º router –≤ http.Server
//   ‚Äì –û–±–æ—Ä–∞—á–∏–≤–∞–µ–º gin.Engine (—Ä–µ–∞–ª–∏–∑—É—é—â–∏–π http.Handler) –≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π http.Server.
// ‚Äì –ë–ª–∞–≥–æ–¥–∞—Ä—è —ç—Ç–æ–º—É –º–æ–∂–µ–º —É–ø—Ä–∞–≤–ª—è—Ç—å –∑–∞–ø—É—Å–∫–æ–º –∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ–º –±–æ–ª–µ–µ —Ç–æ–Ω–∫–æ, —á–µ–º –≤—ã–∑—ã–≤–∞—è –ø—Ä–æ—Å—Ç–æ r.Run().
	srv := &http.Server{
		Addr:    ":8080",
		Handler: router,
	}
 

	// 4. –ó–∞–ø—É—Å–∫–∞–µ–º —Å–µ—Ä–≤–µ—Ä –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π –≥–æ—Ä—É—Ç–∏–Ω–µ
//   ‚Äì –ó–∞–ø—É—Å–∫–∞–µ–º ListenAndServe() –≤ –Ω–æ–≤–æ–π –≥–æ—Ä—É—Ç–∏–Ω–µ, —á—Ç–æ–±—ã –æ—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞ –Ω–µ –±–ª–æ–∫–∏—Ä–æ–≤–∞–ª–∞—Å—å.
// ‚Äì –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ –Ω–µ —Ä–∞–≤–Ω–∞ http.ErrServerClosed (—ç—Ç–æ ¬´–Ω–æ—Ä–º–∞–ª—å–Ω—ã–π¬ª –∫–æ–¥ –∑–∞–∫—Ä—ã—Ç–∏—è), –ª–æ–≥–∏—Ä—É–µ–º –∏ –∑–∞–≤–µ—Ä—à–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —á–µ—Ä–µ–∑ log.Fatalf.
	go func() {
		log.Printf("üöÄ Starting server on %s", srv.Addr)
		if err :=  srv.ListenAndServe(); err != nil && err != http.ErrServerClosed {
			log.Fatalf("failed to start server: %v", err)
		}
	}()

// 5. –õ–æ–≤–∏–º —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Å–∏–≥–Ω–∞–ª—ã –¥–ª—è graceful-shutdown
	// –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –ª–æ–≤–ª—é —Å–∏–≥–Ω–∞–ª–∞ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è (Ctrl+C / kill)
//   ‚Äì –°–æ–∑–¥–∞—ë–º –∫–∞–Ω–∞–ª quit –¥–ª—è —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤.
// ‚Äì signal.Notify –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ SIGINT (Ctrl+C) –∏ SIGTERM (kill).
// ‚Äì <-quit –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –¥–æ –ø–æ–ª—É—á–µ–Ω–∏—è –æ–¥–Ω–æ–≥–æ –∏–∑ —ç—Ç–∏—Ö —Å–∏–≥–Ω–∞–ª–æ–≤.
	quit := make(chan os.Signal, 1)
	signal.Notify(quit, syscall.SIGINT, syscall.SIGTERM)
	<-quit
	log.Println("üîå Shutdown signal received, exiting...")

// 6. –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–µ—Ä–≤–µ—Ä —Å —Ç–∞–π–º–∞—É—Ç–æ–º (–ø–æ–∫–∞ –Ω–µ –æ–±—Ä—ã–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã)
	// –î–∞–µ–º —Å–µ—Ä–≤–µ—Ä—É 5 —Å–µ–∫—É–Ω–¥ –Ω–∞ ¬´—Ç–∏—Ö—É—é¬ª –æ—Å—Ç–∞–Ω–æ–≤–∫—É
	ctx, cancel := context.WithTimeout(context.Background(), 5*time.Second)
	defer cancel()
	if err := srv.Shutdown(ctx); err != nil {
		log.Fatalf("server forced to shutdown: %v", err)
	}
//   ‚Äì –°–æ–∑–¥–∞—ë–º –∫–æ–Ω—Ç–µ–∫—Å—Ç —Å —Ç–∞–π–º–∞—É—Ç–æ–º (5 —Å–µ–∫—É–Ω–¥), —á—Ç–æ–±—ã –Ω–µ –∂–¥–∞—Ç—å –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ.
// ‚Äì srv.Shutdown(ctx) —Å–æ–æ–±—â–∏—Ç —Å–µ—Ä–≤–µ—Ä—É:
// ‚Ä¢ –ø–µ—Ä–µ—Å—Ç–∞—Ç—å –ø—Ä–∏–Ω–∏–º–∞—Ç—å –Ω–æ–≤—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è;
// ‚Ä¢ –¥–∞—Ç—å ¬´–∂–∏–≤—É—â–∏–º¬ª –∑–∞–ø—Ä–æ—Å–∞–º –∑–∞–≤–µ—Ä—à–∏—Ç—å—Å—è –≤ —Ç–µ—á–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ —Ç–∞–π–º–∞—É—Ç–∞;
// ‚Ä¢ –ø–æ—Å–ª–µ —á–µ–≥–æ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –∑–∞–∫—Ä—ã—Ç—å –æ—Å—Ç–∞—Ç–∫–∏.
// ‚Äì –ï—Å–ª–∏ –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö 5 —Å–µ–∫—É–Ω–¥ –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã –Ω–µ –∑–∞–≤–µ—Ä—à–∏–ª–∏—Å—å ‚Äî Shutdown –≤–µ—Ä–Ω—ë—Ç –æ—à–∏–±–∫—É, –∏ –º—ã –ª–æ–≥–∏—Ä—É–µ–º —Ñ–∞—Ç–∞–ª.
// ‚Äì –ï—Å–ª–∏ –≤—Å—ë –ø—Ä–æ—à–ª–æ —É—Å–ø–µ—à–Ω–æ ‚Äî –ø–∏—à–µ–º –≤ –ª–æ–≥ –æ–± —É–¥–∞—á–Ω–æ–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏.

	log.Println("üõë Server stopped gracefully")
}
```

–ü–æ—è—Å–Ω–µ–Ω–∏—è —à–∞–≥–æ–≤:
- gin.Default() ‚Äî –∑–∞–≤–æ–¥–∏—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π HTTP-—Å–µ—Ä–≤–µ—Ä —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∏ recover-middleware.
- –†–æ—É—Ç—ã —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É—é—Ç—Å—è –ø—Ä–∏–≤—ã—á–Ω—ã–º router.GET/....
- –°–æ–∑–¥–∞—ë—Ç—Å—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π http.Server, –≤ –ø–æ–ª–µ Handler –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –Ω–∞—à Gin-router.
srv.ListenAndServe() –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π –≥–æ—Ä—É—Ç–∏–Ω–µ, —á—Ç–æ–±—ã –æ—Å–Ω–æ–≤–Ω–æ–π –ø–æ—Ç–æ–∫ –º–æ–≥ ¬´—Å–∏–¥–µ—Ç—å¬ª –∏ –∂–¥–∞—Ç—å —Å–∏–≥–Ω–∞–ª–∞ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏.
- –ß–µ—Ä–µ–∑ os.Signal –∏ signal.Notify –ª–æ–≤–∏–º Ctrl+C (SIGINT) –∏–ª–∏ kill (SIGTERM).
- srv.Shutdown(ctx) ‚Äî —ç—Ç–æ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –º–µ—Ç–æ–¥ Go-—Å–µ—Ä–≤–µ—Ä–∞, –∫–æ—Ç–æ—Ä—ã–π: ‚Ä¢ –ø–µ—Ä–µ—Å—Ç–∞—ë—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å –Ω–æ–≤—ã–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è;
‚Ä¢ –¥–∞—ë—Ç —Ç–µ–∫—É—â–∏–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞–º (Gin-—Ö–µ–Ω–¥–ª–µ—Ä–∞–º) –¥–æ 5 —Å–µ–∫—É–Ω–¥ –Ω–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ;
‚Ä¢ –∑–∞—Ç–µ–º –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –æ—Å—Ç–∞–≤—à–∏–µ—Å—è.
–¢–∞–∫ –º—ã –ø–æ–ª—É—á–∞–µ–º ¬´–º—è–≥–∫—É—é¬ª –æ—Å—Ç–∞–Ω–æ–≤–∫—É —Å–µ—Ä–≤–µ—Ä–∞, –Ω–µ ¬´—Ä–µ–∂–µ–º¬ª –Ω–∞ –ª–µ—Ç—É –æ—Ç–∫—Ä—ã—Ç—ã–µ HTTP-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è.


–ó–∞—á–µ–º —Ç–∞–∫ –¥–µ–ª–∞—é—Ç?
‚Ä¢ –ì—Ä–µ–π—Å—Ñ—É–ª-—à–∞–¥–æ—É–Ω (graceful shutdown) –Ω—É–∂–µ–Ω –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –ø—Ä–∏ —Ä–µ—Å—Ç–∞—Ä—Ç–µ/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏/–æ—Å—Ç–∞–Ω–æ–≤–∫–µ —Å–µ—Ä–≤–µ—Ä–∞ –Ω–µ –æ–±—Ä—ã–≤–∞—Ç—å ¬´–Ω–∞ –ª–µ—Ç—É¬ª –∞–∫—Ç–∏–≤–Ω—ã–µ HTTP-—Å–µ—Å—Å–∏–∏ –∏–ª–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏.
‚Ä¢ –≠—Ç–æ –∫—Ä–∏—Ç–∏—á–Ω–æ –≤ –±–æ–µ–≤—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö, —á—Ç–æ–±—ã –∫–ª–∏–µ–Ω—Ç—ã –ø–æ–ª—É—á–∞–ª–∏ –æ—Ç–≤–µ—Ç—ã, –∞ –Ω–µ ¬´–æ–±—Ä—ã–≤ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è¬ª.
‚Ä¢ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ http.Server + –∫–æ–Ω—Ç–µ–∫—Å—Ç + —Å–∏–≥–Ω–∞–ª–æ–≤ OS ‚Äî —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω –≤ Go –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º HTTP-—Å–µ—Ä–≤–∏—Å–æ–≤.

–ß—Ç–æ –∑–¥–µ—Å—å —É–ª—É—á—à–µ–Ω–æ:
- –£–±–∏—Ä–∞–µ–º –∏–∑–±—ã—Ç–æ—á–Ω—ã–π os.Exit(1) –ø–æ—Å–ª–µ log.Fatal (–æ–Ω –∏ —Ç–∞–∫ –≤—ã–∑—ã–≤–∞–µ—Ç os.Exit(1)).
- –ü–∏—à–µ–º –ø–æ–Ω—è—Ç–Ω—ã–π log.Fatalf("‚Ä¶: %v", err) –≤–º–µ—Å—Ç–æ errors.Error(err).
- –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π http.Server –¥–ª—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ graceful-shutdown.
- –õ–æ–≤–∏–º —Å–∏–≥–Ω–∞–ª—ã SIGINT/SIGTERM –∏ –¥–∞—ë–º —Å–µ—Ä–≤–µ—Ä—É 5 —Å–µ–∫—É–Ω–¥ –Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π.


# –®–∞–≥ 5: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤ –î–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è (—Ç–∞–±–ª–∏—á–Ω—ã–µ —Ç–µ—Å—Ç—ã)
–û–±–Ω–æ–≤–∏—Ç–µ —Ç–µ—Å—Ç—ã:

```go
// performRequest —Å–æ–∑–¥–∞—ë—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç Gin –∏ –≤—ã–∑—ã–≤–∞–µ—Ç handler.
// –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç recorder —Å –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω—ã–º –æ—Ç–≤–µ—Ç–æ–º.
func performRequest(
	handler gin.HandlerFunc,
	method, path string,
	body io.Reader,
) *httptest.ResponseRecorder {
	// ResponseRecorder –±—É–¥–µ—Ç –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å —Å—Ç–∞—Ç—É—Å, –∑–∞–≥–æ–ª–æ–≤–∫–∏ –∏ —Ç–µ–ª–æ
	recorder := httptest.NewRecorder()

	// –ü–æ–ª—É—á–∞–µ–º –ø—É—Å—Ç–æ–π Router –∏ Context
	ctx, _ := gin.CreateTestContext(recorder)

	// –§–æ—Ä–º–∏—Ä—É–µ–º HTTP-–∑–∞–ø—Ä–æ—Å –∏ –ø–æ–º–µ—â–∞–µ–º –µ–≥–æ –≤ ctx
	req := httptest.NewRequest(method, path, body)
	ctx.Request = req

	// –í—ã–∑—ã–≤–∞–µ–º handler
	handler(ctx)

	return recorder
}
```

–î–∞–≤–∞–π —Ä–∞–∑–±–µ—Ä—ë–º —ç—Ç—É —Ñ—É–Ω–∫—Ü–∏—é ‚Äî performRequest ‚Äî —à–∞–≥ –∑–∞ —à–∞–≥–æ–º, –æ—á–µ–Ω—å –ø—Ä–æ—Å—Ç–æ, –∫–∞–∫ –¥–ª—è —Ä–µ–±—ë–Ω–∫–∞. –ü—Ä–µ–¥—Å—Ç–∞–≤—å, —á—Ç–æ —É –Ω–∞—Å –µ—Å—Ç—å –∫—Ä–æ—Ö–æ—Ç–Ω—ã–π —Ä–µ—Å—Ç–æ—Ä–∞–Ω (–Ω–∞—à HTTP-—Å–µ—Ä–≤–µ—Ä), –∏ –º—ã —Ö–æ—Ç–∏–º –Ω–∞—É—á–∏—Ç—å—Å—è –ø—Ä–æ–≤–µ—Ä—è—Ç—å, —á—Ç–æ –ø–æ–≤–∞—Ä (–Ω–∞—à —Ö–µ–Ω–¥–ª–µ—Ä) –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≥–æ—Ç–æ–≤–∏—Ç –±–ª—é–¥–æ (–æ—Ç–¥–∞—ë—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç). –ù–æ —á—Ç–æ–±—ã –Ω–µ —É—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –ø–æ–ª–Ω—ã–π –∑–∞–ø—É—Å–∫ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞, –º—ã –¥–µ–ª–∞–µ–º ¬´–º–∏–Ω–∏-–∫—É—Ö–Ω—é¬ª –≤ —Ç–µ—Å—Ç–µ. –í–æ—Ç –∫–∞–∫ —ç—Ç–æ –≤—ã–≥–ª—è–¥–∏—Ç:

### –ó–∞—á–µ–º –Ω—É–∂–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è performRequest?
‚Äì –ú—ã –Ω–µ —Ö–æ—Ç–∏–º –∫–∞–∂–¥—ã–π —Ä–∞–∑ –ø–æ–¥–Ω–∏–º–∞—Ç—å –Ω–∞—Å—Ç–æ—è—â–∏–π HTTP-—Å–µ—Ä–≤–µ—Ä, –æ—Ç–∫—Ä—ã–≤–∞—Ç—å –ø–æ—Ä—Ç—ã –∏ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –Ω–∞—Å—Ç–æ—è—â–∏–µ –∑–∞–ø—Ä–æ—Å—ã.
‚Äì –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –º—ã —Å–æ–∑–¥–∞—ë–º ¬´–¥–≤–æ–∏—á–Ω—ã–π¬ª —Ç–µ—Å—Ç, –≥–¥–µ –∑–∞–≥—Ä—É–∂–∞–µ–º —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω–æ–≥–æ –Ω–∞–º –ø–æ–≤–∞—Ä–∞ (—Ö–µ–Ω–¥–ª–µ—Ä) –∏ –ø–µ—Ä–µ–¥–∞—ë–º –µ–º—É –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–π –∑–∞–ø—Ä–æ—Å.
‚Äì –§—É–Ω–∫—Ü–∏—è performRequest –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É–µ—Ç —ç—Ç–æ—Ç –ø—Ä–æ—Ü–µ—Å—Å: –æ–Ω–∞ –≥–æ—Ç–æ–≤–∏—Ç —Å—Ä–µ–¥—É, –¥–∞—ë—Ç —Ö–µ–Ω–¥–ª–µ—Ä—É ¬´–∑–∞–ø—Ä–æ—Å¬ª –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–∞–º ¬´–æ—Ç–≤–µ—Ç¬ª, —á—Ç–æ–±—ã –º—ã –º–æ–≥–ª–∏ –µ–≥–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å.

###–ö–∞–∫–∏–µ —É –Ω–µ—ë –≤—Ö–æ–¥–Ω—ã–µ –∏ –≤—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ?

–í—Ö–æ–¥:
- handler gin.HandlerFunc ‚Äî —ç—Ç–æ –∫–∞–∫ –ø–æ–≤–∞—Ä: –∫—É—Å–æ—á–µ–∫ –∫–æ–¥–∞, –∫–æ—Ç–æ—Ä—ã–π —É–º–µ–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å –∑–∞–ø—Ä–æ—Å –∏ –≥–æ—Ç–æ–≤–∏—Ç—å –æ—Ç–≤–µ—Ç.
- method –∏ path (—Å—Ç—Ä–æ–∫–∏) ‚Äî —Ç–∏–ø –∑–∞–ø—Ä–æ—Å–∞ (GET, POST –∏ —Ç. –¥.) –∏ –∞–¥—Ä–µ—Å (–Ω–∞–ø—Ä–∏–º–µ—Ä, /hello).
- body io.Reader ‚Äî —Ç–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, JSON –∏–ª–∏ —Ñ–æ—Ä–º–∞), –Ω–æ –≤ –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ –º—ã —á–∞—Å—Ç–æ —Å—Ç–∞–≤–∏–º nil, –ø–æ—Ç–æ–º—É —á—Ç–æ —Ç–µ–ª–æ –Ω–∞–º –Ω–µ –Ω—É–∂–Ω–æ.

–í—ã—Ö–æ–¥:
- *httptest.ResponseRecorder ‚Äî —ç—Ç–æ –±–ª–æ–∫–Ω–æ—Ç –∏ –∫–∞–º–µ—Ä–∞, –∫–æ—Ç–æ—Ä—ã–µ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç –≤—Å—ë, —á—Ç–æ –ø–æ–≤–∞—Ä –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤ –æ—Ç–≤–µ—Ç: –∫–∞–∫–æ–π —Å—Ç–∞—Ç—É—Å (200, 404‚Ä¶), –∫–∞–∫–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ (Content-Type) –∏ –∫–∞–∫–æ–µ —Ç–µ–ª–æ (JSON-—Å—Ç—Ä–æ–∫–∞).


### –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤–Ω—É—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–∏, —à–∞–≥ –∑–∞ —à–∞–≥–æ–º: 
#### –®–∞–≥ 3.1. –°–æ–∑–¥–∞—ë–º ¬´–±–ª–æ–∫–Ω–æ—Ç¬ª –¥–ª—è –æ—Ç–≤–µ—Ç–∞
```go
recorder := httptest.NewRecorder()
```
–ü—Ä–µ–¥—Å—Ç–∞–≤—å, —á—Ç–æ —ç—Ç–æ –ø—É—Å—Ç–∞—è —Ç–µ—Ç—Ä–∞–¥–∫–∞, –∫—É–¥–∞ –ø–æ–≤–∞—Ä –±—É–¥–µ—Ç –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å, —á—Ç–æ –æ–Ω –ø—Ä–∏–≥–æ—Ç–æ–≤–∏–ª: —Å—Ç–∞—Ç—É—Å, –∑–∞–≥–æ–ª–æ–≤–∫–∏ –∏ —Ç–µ–ª–æ. 


#### –®–∞–≥ 3.2. –ì–æ—Ç–æ–≤–∏–º –º–∞–ª–µ–Ω—å–∫—É—é ¬´–∫—É—Ö–Ω—é¬ª Gin
```go
ctx, _ := gin.CreateTestContext(recorder)
```

- gin.CreateTestContext –¥–∞—ë—Ç –Ω–∞–º –¥–≤–∞ –∂–∏–≤–æ—Ç–∏–∫–∞: –ø—É—Å—Ç–æ–π –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä (–º—ã –µ–≥–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º) –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç (ctx), –≤ –∫–æ—Ç–æ—Ä–æ–º —Ö—Ä–∞–Ω–∏—Ç—Å—è –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞–ø—Ä–æ—Å–µ, –∏ ¬´–±–ª–æ–∫–Ω–æ—Ç¬ª –¥–ª—è –æ—Ç–≤–µ—Ç–∞.
- –ú—ã –ø–µ—Ä–µ–¥–∞—ë–º recorder —Ç—É–¥–∞, —á—Ç–æ–±—ã Gin –∑–Ω–∞–ª: ¬´–ó–∞–ø–∏—Å—ã–≤–∞–π –æ—Ç–≤–µ—Ç –∏–º–µ–Ω–Ω–æ –≤ —ç—Ç—É —Ç–µ—Ç—Ä–∞–¥–∫—É¬ª. 


#### –®–∞–≥ 3.3. –§–æ—Ä–º–∏—Ä—É–µ–º –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–π HTTP-–∑–∞–ø—Ä–æ—Å
```go
req := httptest.NewRequest(method, path, body)
ctx.Request = req
```

- httptest.NewRequest —Å–æ–∑–¥–∞—ë—Ç –æ–±—ä–µ–∫—Ç –∑–∞–ø—Ä–æ—Å–∞ —Ç–∞–∫, –±—É–¥—Ç–æ –µ–≥–æ –ø—Ä–∏—Å–ª–∞–ª –∫–ª–∏–µ–Ω—Ç (–±—Ä–∞—É–∑–µ—Ä –∏–ª–∏ –¥—Ä—É–≥–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞).
- method –∏ path –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç, –∫–∞–∫–æ–π –∑–∞–ø—Ä–æ—Å ‚Äî –Ω–∞–ø—Ä–∏–º–µ—Ä, GET –Ω–∞ /hello.
- body ‚Äî –µ—Å–ª–∏ –Ω—É–∂–Ω–æ, –º—ã –º–æ–∂–µ–º –ø–µ—Ä–µ–¥–∞—Ç—å JSON –∏–ª–∏ —Ñ–æ—Ä–º—É.
- –ó–∞—Ç–µ–º –º—ã –≥–æ–≤–æ—Ä–∏–º –Ω–∞—à–µ–º—É –∫–æ–Ω—Ç–µ–∫—Å—Ç—É ctx, —á—Ç–æ —É –Ω–µ–≥–æ —Ç–µ–ø–µ—Ä—å –µ—Å—Ç—å –∑–∞–ø—Ä–æ—Å: ctx.Request = req. 

#### –®–∞–≥ 3.4. –í—ã–∑—ã–≤–∞–µ–º —Ö–µ–Ω–¥–ª–µ—Ä (–ø–æ–≤–∞—Ä–∞)
```go
handler(ctx)
```

- –ú—ã –ø–µ—Ä–µ–¥–∞—ë–º –∫–æ–Ω—Ç–µ–∫—Å—Ç —Å –Ω–∞—à–∏–º –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–º –∑–∞–ø—Ä–æ—Å–æ–º –ø—Ä—è–º–æ –≤ —Ñ—É–Ω–∫—Ü–∏—é-–ø–æ–≤–∞—Ä–∞.
- –ü–æ–≤–∞—Ä –ø—Ä–æ—á–∏—Ç–∞–µ—Ç ctx.Request, –æ–±—Ä–∞–±–æ—Ç–∞–µ—Ç –∑–∞–ø—Ä–æ—Å (–ø—Ä–æ—á–∏—Ç–∞–µ—Ç –ø—É—Ç—å, –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, —Ç–µ–ª–æ) –∏ –Ω–∞–ø–∏—à–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ ctx.Writer. –ê ctx.Writer –∫–∞–∫ —Ä–∞–∑ —Å–≤—è–∑–∞–Ω —Å –Ω–∞—à–∏–º recorder. 

#### –®–∞–≥ 3.5. –í–æ–∑–≤—Ä–∞—â–∞–µ–º –∑–∞–ø–∏—Å–∞–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç
```go
return recorder
```

- –í recorder —É–∂–µ –∑–∞–ø–∏—Å–∞–Ω–æ –≤—Å—ë, —á—Ç–æ —Ö–µ–Ω–¥–ª–µ—Ä —Ö–æ—Ç–µ–ª –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–ª–∏–µ–Ω—Ç—É: –Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–æ–¥ 200, –∑–∞–≥–æ–ª–æ–≤–æ–∫ Content-Type: application/json; charset=utf-8 –∏ —Ç–µ–ª–æ {"text":"Hello, World!"}.
- –ú—ã –≤–æ–∑–≤—Ä–∞—â–∞–µ–º —ç—Ç–æ—Ç recorder –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏, —á—Ç–æ–±—ã –≤ —Ç–µ—Å—Ç–µ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:

‚Ä¢ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ª–∏ —Å—Ç–∞—Ç—É—Å?

‚Ä¢ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ª–∏ –∑–∞–≥–æ–ª–æ–≤–æ–∫ Content-Type?

‚Ä¢ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ª–∏ JSON-–æ—Ç–≤–µ—Ç?


### –ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ –∏ –≥–¥–µ –≤—Å—Ç—Ä–µ—á–∞–µ—Ç—Å—è?
- –í —é–Ω–∏—Ç-—Ç–µ—Å—Ç–∞—Ö HTTP-—Å–µ—Ä–≤–∏—Å–æ–≤ –Ω–∞ Go —Å —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–º Gin (–∏ –Ω–µ —Ç–æ–ª—å–∫–æ).
- –ü–æ–∑–≤–æ–ª—è–µ—Ç –æ—á–µ–Ω—å –±—ã—Å—Ç—Ä–æ –∏ –ª–æ–∫–∞–ª—å–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏–∫—É –æ–¥–Ω–æ–≥–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞, –±–µ–∑ –∫—É—á–∏ –ø–æ–±–æ—á–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ (–Ω–µ—Ç —Ä–µ–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏, –Ω–µ—Ç —Ä–µ–∞–ª—å–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤, –Ω–µ—Ç –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö ‚Äî —Ç–æ–ª—å–∫–æ —á–∏—Å—Ç—ã–π –∫–æ–¥).
- –ï—Å–ª–∏ —É —Ç–µ–±—è –º–Ω–æ–≥–æ –º–µ–ª–∫–∏—Ö —Ö–µ–Ω–¥–ª–µ—Ä–æ–≤ (—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è, –ª–æ–≥–∏–Ω, –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ —Ç. –ø.), –∫–∞–∂–¥—ã–π –º–æ–∂–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–∞–∫–∏–º —Å–ø–æ—Å–æ–±–æ–º.

–ò—Ç–æ–≥:
–§—É–Ω–∫—Ü–∏—è performRequest ‚Äî —ç—Ç–æ –º–∏–Ω–∏-—Ñ–∞–±—Ä–∏–∫–∞ –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ HTTP-–∑–∞–ø—Ä–æ—Å–∞ –∏ –∑–∞—Ö–≤–∞—Ç—É –æ—Ç–≤–µ—Ç–∞, —á—Ç–æ–±—ã –º—ã –º–æ–≥–ª–∏ –≤ —Ç–µ—Å—Ç–∞—Ö —Å–ø–æ–∫–æ–π–Ω–æ –∏ –Ω–∞–¥—ë–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å, –∫–∞–∫ –Ω–∞—à —Ö–µ–Ω–¥–ª–µ—Ä —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ —Ä–∞–∑–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã.


## –ø—Ä–∏–º–µ—Ä —Å–∞–º–æ–≥–æ —Ç–µ—Å—Ç–∞ –¥–ª—è —Ö–µ–Ω–¥–ª–µ—Ä–∞
```go
func TestHelloHandler(t *testing.T) {
	gin.SetMode(gin.TestMode)

	tests := []struct {
		name                string
		method              string
		path                string
		expectedStatusCode  int
		expectedContentType string
		expectedBody        Message
	}{
		{
			name:                "GET hello returns 200 JSON",
			method:              http.MethodGet,
			path:                "/hello",
			expectedStatusCode:  http.StatusOK,
			expectedContentType: "application/json; charset=utf-8",
			expectedBody:        Message{Text: "Hello, World!"},
		},
		// –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ –∫–µ–π—Å–æ–≤
	}

	for _, tc := range tests {
		tc := tc // –¥–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞
		t.Run(tc.name, func(t *testing.T) {
			t.Parallel()

			// –≤—ã–ø–æ–ª–Ω—è–µ–º –∑–∞–ø—Ä–æ—Å
			recorder := performRequest(HelloHandler, tc.method, tc.path, nil)

			// –ø—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å-–∫–æ–¥
			require.Equal(t, tc.expectedStatusCode, recorder.Code)

			// –ø—Ä–æ–≤–µ—Ä—è–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ Content-Type
			require.Equal(t, tc.expectedContentType, recorder.Header().Get("Content-Type"))

			// —Ä–∞–∑–±–∏—Ä–∞–µ–º JSON-–æ—Ç–≤–µ—Ç
			var msg Message
			err := json.Unmarshal(recorder.Body.Bytes(), &msg)
			require.NoError(t, err, "response must be valid JSON")

			// –ø—Ä–æ–≤–µ—Ä—è–µ–º —Ç–µ–ª–æ –æ—Ç–≤–µ—Ç–∞
			require.Equal(t, tc.expectedBody, msg)
		})
	}
}

func TestGoodbyeHandler(t *testing.T) {
	gin.SetMode(gin.TestMode)

	tests := []struct {
		name                string
		method              string
		path                string
		expectedStatusCode  int
		expectedContentType string
		expectedBody        Message
	}{
		{
			name:                "GET goodbye returns 200 JSON",
			method:              http.MethodGet,
			path:                "/goodbye",
			expectedStatusCode:  http.StatusOK,
			expectedContentType: "application/json; charset=utf-8",
			expectedBody:        Message{Text: "Goodbye, World!"},
		},
		// –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ –∫–µ–π—Å–æ–≤
	}

	for _, tc := range tests {
		tc := tc // –¥–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞
		t.Run(tc.name, func(t *testing.T) {
			t.Parallel()

			// –≤—ã–ø–æ–ª–Ω—è–µ–º –∑–∞–ø—Ä–æ—Å
			recorder := performRequest(GoodbyeHandler, tc.method, tc.path, nil)

			// –ø—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å-–∫–æ–¥
			require.Equal(t, tc.expectedStatusCode, recorder.Code)

			// –ø—Ä–æ–≤–µ—Ä—è–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ Content-Type
			require.Equal(t, tc.expectedContentType, recorder.Header().Get("Content-Type"))

			// —Ä–∞–∑–±–∏—Ä–∞–µ–º JSON-–æ—Ç–≤–µ—Ç
			var msg Message
			err := json.Unmarshal(recorder.Body.Bytes(), &msg)
			require.NoError(t, err, "response must be valid JSON")

			// –ø—Ä–æ–≤–µ—Ä—è–µ–º —Ç–µ–ª–æ –æ—Ç–≤–µ—Ç–∞
			require.Equal(t, tc.expectedBody, msg)
		})
	}
}
```

–î–∞–≤–∞–π —Ä–∞–∑–±–µ—Ä—ë–º —ç—Ç–æ—Ç —Ç–µ—Å—Ç–æ–≤—ã–π –∫–æ–¥ —Å–æ–≤–µ—Ä—à–µ–Ω–Ω–æ –ø–æ-–ø—Ä–æ—Å—Ç–æ–º—É, —à–∞–≥ –∑–∞ —à–∞–≥–æ–º, –∫–∞–∫ –±—É–¥—Ç–æ —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞–µ–º –Ω–æ–≤–∏—á–∫—É –∏–ª–∏ –¥–∞–∂–µ —Ä–µ–±—ë–Ω–∫—É. –ü—Ä–µ–¥—Å—Ç–∞–≤—å, —á—Ç–æ —É –Ω–∞—Å –µ—Å—Ç—å —Ñ—É–Ω–∫—Ü–∏—è (—Ö–µ–Ω–¥–ª–µ—Ä) HelloHandler, –∫–æ—Ç–æ—Ä–∞—è –Ω–∞ –∑–∞–ø—Ä–æ—Å ‚Äú/hello‚Äù –æ—Ç–≤–µ—á–∞–µ—Ç —Å—Ç—Ä–æ–∫–æ–π ‚ÄúHello, World!‚Äù –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON. –ú—ã —Ö–æ—Ç–∏–º –Ω–∞–ø–∏—Å–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ç–µ—Å—Ç, —á—Ç–æ–±—ã —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –æ–Ω–∞ –≤—Å–µ–≥–¥–∞ —Ç–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç.

### –ó–∞—á–µ–º –≤–æ–æ–±—â–µ –Ω—É–∂–Ω—ã —Ç–µ—Å—Ç—ã?
- –ß—Ç–æ–±—ã –±–µ–∑ —Ç–≤–æ–µ–≥–æ –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–∞ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –∫–æ–¥ –¥–µ–ª–∞–µ—Ç —Ç–æ, —á—Ç–æ –¥–æ–ª–∂–Ω–æ.
- –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ —Å–ª—É—á–∞–π–Ω–æ –ø–æ–ª–æ–º–∞–µ—Ç—Å—è, —Ç–µ—Å—Ç —Å—Ä–∞–∑—É –æ–± —ç—Ç–æ–º —Å–æ–æ–±—â–∏—Ç.

## —á—Ç–æ —Ç–∞–∫–æ–µ smoke-—Ç–µ—Å—Ç –∏ –≤ —á–µ–º —Ä–∞–∑–Ω–∏—Ü–∞ –æ—Ç unit-—Ç–µ—Å—Ç–∞
### üî• Smoke-—Ç–µ—Å—Ç (—Ç–µ—Å—Ç "–¥—ã–º–æ–≤–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏")
–≠—Ç–æ –±–∞–∑–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ–±—ã —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Å–∏—Å—Ç–µ–º–∞ –≤–æ–æ–±—â–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∏ –Ω–µ –ø–∞–¥–∞–µ—Ç —Å—Ä–∞–∑—É. –ù–∞–∑–≤–∞–Ω–∏–µ –ø–æ—à–ª–æ –æ—Ç "–ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ –¥—ã–º": –≤–∫–ª—é—á–∏–ª–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ ‚Äî –Ω–µ –∑–∞–¥—ã–º–∏–ª–æ—Å—å, –∑–Ω–∞—á–∏—Ç, –º–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∞–ª—å—à–µ.

- –¶–µ–ª—å: –ë—ã—Å—Ç—Ä–æ —É–¥–æ—Å—Ç–æ–≤–µ—Ä–∏—Ç—å—Å—è, —á—Ç–æ –æ—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç–∞–µ—Ç.
- –£—Ä–æ–≤–µ–Ω—å: –û–±—ã—á–Ω–æ –ø—Ä–æ–≤–æ–¥–∏—Ç—Å—è –ø–æ—Å–ª–µ —Å–±–æ—Ä–∫–∏, –ø–µ—Ä–µ–¥ –≥–ª—É–±–æ–∫–∏–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º.

–ü—Ä–∏–º–µ—Ä—ã:
- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏ –æ—Ç–≤–µ—á–∞–µ—Ç 200 OK.
- API –æ—Ç–¥–∞—ë—Ç —Ö–æ—Ç—è –±—ã –±–∞–∑–æ–≤—ã–π –æ—Ç–≤–µ—Ç.
- –ë–∞–∑–æ–≤—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–ë–î, Redis, –∫–æ–Ω—Ñ–∏–≥–∏) –¥–æ—Å—Ç—É–ø–Ω—ã.

### üß™ Unit-—Ç–µ—Å—Ç (–º–æ–¥—É–ª—å–Ω—ã–π —Ç–µ—Å—Ç)
–≠—Ç–æ –ø–æ–¥—Ä–æ–±–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –º–∞–ª–µ–Ω—å–∫–∏—Ö, –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —á–∞—Å—Ç–µ–π –∫–æ–¥–∞ ‚Äî –Ω–∞–ø—Ä–∏–º–µ—Ä, —Ñ—É–Ω–∫—Ü–∏–π, –º–µ—Ç–æ–¥–æ–≤ –∏–ª–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.

- –¶–µ–ª—å: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –±–ª–æ–∫ –ª–æ–≥–∏–∫–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –Ω–∞–¥–æ.
- –£—Ä–æ–≤–µ–Ω—å: –ù–∏–∑–∫–∏–π ‚Äî –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –≤–Ω–µ—à–Ω–µ–π —Å—Ä–µ–¥—ã.

–ü—Ä–∏–º–µ—Ä—ã:
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞—Å—á—ë—Ç–∞ –Ω–∞–ª–æ–≥–∞.
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ edge-case –¥–∞–Ω–Ω—ã—Ö.
- –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –º–µ—Ç–æ–¥ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω—É–∂–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç.


### –ö–∞–∫–∏–µ –µ—â–µ –≤–∏–¥—ã —Ç–µ—Å—Ç–æ–≤ —Å—É—â–µ—Å—Ç–≤—É—é—Ç?
—É—â–µ—Å—Ç–≤—É–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ –≤–∏–¥–æ–≤ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –∏ –∫–∞–∂–¥—ã–π –∏–∑ –Ω–∏—Ö –∏–≥—Ä–∞–µ—Ç —Å–≤–æ—é —Ä–æ–ª—å –≤ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–∏ –∫–∞—á–µ—Å—Ç–≤–∞ –ü–û. –í–æ—Ç –∫—Ä–∞—Ç–∫–∏–π –æ–±–∑–æ—Ä —Å–∞–º—ã—Ö —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω—ã—Ö:

üß™ Unit-—Ç–µ—Å—Ç—ã
–¢–µ—Å—Ç–∏—Ä—É—é—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏–ª–∏ –º–µ—Ç–æ–¥—ã.

–ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã –æ—Ç –≤–Ω–µ—à–Ω–µ–π —Å—Ä–µ–¥—ã.

–ë—ã—Å—Ç—Ä—ã–µ –∏ —Ç–æ—á–µ—á–Ω—ã–µ.

üîó Integration-—Ç–µ—Å—Ç—ã
–ü—Ä–æ–≤–µ—Ä—è—é—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –º–µ–∂–¥—É –º–æ–¥—É–ª—è–º–∏.

–ù–∞–ø—Ä–∏–º–µ—Ä, —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –º–µ–∂–¥—É API –∏ –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö.

–£–ª–æ–≤—è—Ç –±–∞–≥–∏, –≤–æ–∑–Ω–∏–∫–∞—é—â–∏–µ –ø—Ä–∏ —Å–∫–ª–µ–π–∫–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.

üé≠ End-to-End (E2E) —Ç–µ—Å—Ç—ã
–ò–º–∏—Ç–∏—Ä—É—é—Ç —Ä–µ–∞–ª—å–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

–ü–æ–ª–Ω—ã–π –ø—É—Ç—å: –æ—Ç –≤–≤–æ–¥–∞ –¥–æ –æ—Ç–≤–µ—Ç–∞ —Å–∏—Å—Ç–µ–º—ã.

–ú–µ–¥–ª–µ–Ω–Ω—ã–µ, –Ω–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–µ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ–±—â–µ–≥–æ —Ñ–ª–æ—É.

üí® Smoke-—Ç–µ—Å—Ç—ã
–ü–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ —Å–∏—Å—Ç–µ–º–∞ –≤–æ–æ–±—â–µ —Ä–∞–±–æ—Ç–∞–µ—Ç.

–ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø–æ—Å–ª–µ —Å–±–æ—Ä–∫–∏ ‚Äî —á—Ç–æ–±—ã —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –Ω–∏—á–µ–≥–æ –Ω–µ —Å–ª–æ–º–∞–ª–æ—Å—å.

üßÉ Sanity-—Ç–µ—Å—Ç—ã
–ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ –º–µ–ª–∫–∏–µ –±–∞–≥—Ñ–∏–∫—Å—ã –∏–ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–µ –Ω–∞—Ä—É—à–∏–ª–∏ –æ—Å–Ω–æ–≤–Ω—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å.

–ü–æ—Ö–æ–∂–∏ –Ω–∞ smoke, –Ω–æ –±–æ–ª–µ–µ —Å—Ñ–æ–∫—É—Å–∏—Ä–æ–≤–∞–Ω—ã.

üõ† Regression-—Ç–µ—Å—Ç—ã
–ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ –Ω–æ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–µ —Å–ª–æ–º–∞–ª–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª.

–ß–∞—Å—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É—é—Ç—Å—è –∏ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –≤ CI/CD.

üë§ Acceptance-—Ç–µ—Å—Ç—ã
–û—Ü–µ–Ω–∏–≤–∞—é—Ç, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ª–∏ —Å–∏—Å—Ç–µ–º–∞ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º –∑–∞–∫–∞–∑—á–∏–∫–∞.

–ß–∞—Å—Ç–æ –ø–∏—à—É—Ç—Å—è —Å–æ–≤–º–µ—Å—Ç–Ω–æ —Å –±–∏–∑–Ω–µ—Å–æ–º.

üßº UI/UX —Ç–µ—Å—Ç—ã
–ü—Ä–æ–≤–µ—Ä—è—é—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç.

–ú–æ–∂–µ—Ç –≤–∫–ª—é—á–∞—Ç—å –≤–∏–∑—É–∞–ª—å–Ω—É—é —Ä–µ–≥—Ä–µ—Å—Å–∏—é, —É–¥–æ–±—Å—Ç–≤–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –∏ —á–∏—Ç–∞–µ–º–æ—Å—Ç—å.

üìä Performance –∏ Load-—Ç–µ—Å—Ç—ã
–û—Ü–µ–Ω–∏–≤–∞—é—Ç —Å–∫–æ—Ä–æ—Å—Ç—å –∏ —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã –ø–æ–¥ –Ω–∞–≥—Ä—É–∑–∫–æ–π.

–ù–∞–ø—Ä–∏–º–µ—Ä, –≤—ã–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ª–∏ —Å–∞–π—Ç 1000 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Å–µ–∫—É–Ω–¥—É.

#### –°–∏–≥–Ω–∞—Ç—É—Ä–∞ unit-—Ç–µ—Å—Ç–∞
```go
func TestHelloHandler(t *testing.T) { ‚Ä¶ }
```
- –õ—é–±–æ–π —Ç–µ—Å—Ç –≤ Go –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å Test –∏ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç t *testing.T.
- –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç go test –Ω–∞–π–¥—ë—Ç –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏, –Ω–∞—á–∏–Ω–∞—é—â–∏–µ—Å—è —Å Test, –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç –∏—Ö.

#### –û—Ç–∫–ª—é—á–∞–µ–º –ª–∏—à–Ω–∏–µ –ª–æ–≥–∏
```go
gin.SetMode(gin.TestMode)
```
- Gin –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –º–æ–∂–µ—Ç –º–Ω–æ–≥–æ –ø–∏—Å–∞—Ç—å –≤ –∫–æ–Ω—Å–æ–ª—å (–ª–æ–≥–∏ –∑–∞–ø—Ä–æ—Å–æ–≤).
- –í —Ä–µ–∂–∏–º–µ TestMode –æ–Ω —Ç–∏—Ö–æ–Ω—å–∫–æ —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–µ –º–µ—à–∞–µ—Ç –≤—ã–≤–æ–¥–æ–º.


#### –û–ø–∏—Å—ã–≤–∞–µ–º –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏ –æ–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã (table-driven —Ç–µ—Å—Ç)
```go
tests := []struct {
  name                string
  method              string
  path                string
  expectedStatusCode  int
  expectedContentType string
  expectedBody        Message
}{
  {
    name:                "GET hello returns 200 JSON",
    method:              http.MethodGet,
    path:                "/hello",
    expectedStatusCode:  http.StatusOK,
    expectedContentType: "application/json; charset=utf-8",
    expectedBody:        Message{Text: "Hello, World!"},
  },
}
```
- tests ‚Äî —ç—Ç–æ —Å–ø–∏—Å–æ–∫ –∫–µ–π—Å–æ–≤ (—Å—Ü–µ–Ω–∞—Ä–∏–µ–≤), –∫–æ—Ç–æ—Ä—ã–µ –º—ã —Ö–æ—Ç–∏–º –ø—Ä–æ–≤–µ—Ä–∏—Ç—å.
- –î–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–µ–π—Å–∞ —É–∫–∞–∑—ã–≤–∞–µ–º:

‚Ä¢ name ‚Äî —á–µ–ª–æ–≤–µ–∫–æ—á–∏—Ç–∞–µ–º–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ, —á—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å, —á—Ç–æ –∏–º–µ–Ω–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è.

‚Ä¢ method –∏ path ‚Äî —á—Ç–æ –º—ã –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ö–µ–Ω–¥–ª–µ—Ä—É (GET –Ω–∞ /hello).

‚Ä¢ expectedStatusCode ‚Äî –∫–∞–∫–æ–π HTTP-–∫–æ–¥ –º—ã —Ö–æ—Ç–∏–º –ø–æ–ª—É—á–∏—Ç—å (200 OK).

‚Ä¢ expectedContentType ‚Äî –∫–∞–∫–æ–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ ‚ÄúContent-Type‚Äù –º—ã —Ö–æ—Ç–∏–º —É–≤–∏–¥–µ—Ç—å.

‚Ä¢ expectedBody ‚Äî –∫–∞–∫—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é (JSON) –º—ã –∂–¥—ë–º –≤ —Ç–µ–ª–µ –æ—Ç–≤–µ—Ç–∞.


#### –ü–µ—Ä–µ–±–∏—Ä–∞–µ–º –≤—Å–µ –∫–µ–π—Å—ã
```go
for _, tc := range tests {
  tc := tc              // —Ñ–∏–∫—Å –¥–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª–∏
  t.Run(tc.name, func(t *testing.T) {
    t.Parallel()        // –∑–∞–ø—É—Å–∫–∞–µ–º —Ç–µ—Å—Ç—ã –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
    ‚Ä¶
  })
}
```
- for _, tc := range tests –∑–Ω–∞—á–∏—Ç ‚Äú–¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–µ—Å—Ç–∞ –∏–∑ —Å–ø–∏—Å–∫–∞‚Äù.
- t.Run(tc.name, func(t *testing.T) { ‚Ä¶ }) —Å–æ–∑–¥–∞—ë—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø–æ–¥–ø—Ä–æ—Ü–µ—Å—Å (subtest) —Å –∏–º–µ–Ω–µ–º tc.name.
- t.Parallel() –ø–æ–∑–≤–æ–ª—è–µ—Ç —ç—Ç–∏–º –ø–æ–¥–ø—Ä–æ—Ü–µ—Å—Å–∞–º –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ, —É—Å–∫–æ—Ä—è—è –æ–±—â–∏–π –ø—Ä–æ–≥–æ–Ω —Ç–µ—Å—Ç–æ–≤.


#### –í–Ω—É—Ç—Ä–∏ –∫–∞–∂–¥–æ–≥–æ –ø–æ–¥–ø—Ä–æ—Ü–µ—Å—Å–∞ –¥–µ–ª–∞–µ–º —Ç—Ä–∏ –≤–µ—â–∏: 
##### 6.1. –í—ã–ø–æ–ª–Ω—è–µ–º –Ω–∞—à —Ö–µ–Ω–¥–ª–µ—Ä —Å –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–º –∑–∞–ø—Ä–æ—Å–æ–º
```go
recorder := performRequest(HelloHandler, tc.method, tc.path, nil)   
```   
- performRequest ‚Äî —ç—Ç–æ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è:

‚Ä¢ —Å–æ–∑–¥–∞—ë—Ç —Ñ–∏–∫—Ç–∏–≤–Ω—ã–π HTTP-–∑–∞–ø—Ä–æ—Å (–º–µ—Ç–æ–¥ + –ø—É—Ç—å),

‚Ä¢ –ø–µ—Ä–µ–¥–∞—ë—Ç –µ–≥–æ –≤ —Ö–µ–Ω–¥–ª–µ—Ä,

‚Ä¢ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç recorder ‚Äî –æ–±—ä–µ–∫—Ç, –≤ –∫–æ—Ç–æ—Ä–æ–º –∑–∞–ø–∏—Å–∞–Ω—ã —Å—Ç–∞—Ç—É—Å, –∑–∞–≥–æ–ª–æ–≤–∫–∏ –∏ —Ç–µ–ª–æ –æ—Ç–≤–µ—Ç–∞.

##### 6.2. –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å-–∫–æ–¥
```go
require.Equal(t, tc.expectedStatusCode, recorder.Code)      
```

- recorder.Code ‚Äî —ç—Ç–æ –∫–æ–¥ –æ—Ç–≤–µ—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 200).
- require.Equal (–∏–∑ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ testify) —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç –¥–≤–∞ —á–∏—Å–ª–∞ –∏ —Å—Ä–∞–∑—É –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Ç–µ—Å—Ç –∏ –≤—ã–≤–æ–¥–∏—Ç –æ—à–∏–±–∫—É, –µ—Å–ª–∏ –æ–Ω–∏ –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç. 

##### 6.3. –ü—Ä–æ–≤–µ—Ä—è–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ Content-Type
```go
require.Equal(t, tc.expectedContentType, recorder.Header().Get("Content-Type")) 
```     
- recorder.Header().Get("Content-Type") —á–∏—Ç–∞–µ—Ç, –∫–∞–∫–æ–π ‚ÄúContent-Type‚Äù —Ö–µ–Ω–¥–ª–µ—Ä —É—Å—Ç–∞–Ω–æ–≤–∏–ª.
- –°—Ä–∞–≤–Ω–∏–≤–∞–µ–º —Å –æ–∂–∏–¥–∞–µ–º—ã–º (–æ–±—ã—á–Ω–æ ‚Äúapplication/json; charset=utf-8‚Äù). 

##### 6.4. –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–µ–ª–æ –æ—Ç–≤–µ—Ç–∞ (JSON)
```go      
  var msg Message      
  err := json.Unmarshal(recorder.Body.Bytes(), &msg)      
  require.NoError(t, err, "response must be valid JSON")      
  require.Equal(t, tc.expectedBody, msg)   
```   
- recorder.Body.Bytes() –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç ¬´—Å—ã—Ä—ã–µ¬ª –±–∞–π—Ç—ã –æ—Ç–≤–µ—Ç–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä {"text":"Hello, World!"}.
- json.Unmarshal –ø—ã—Ç–∞–µ—Ç—Å—è —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å —ç—Ç–∏ –±–∞–π—Ç—ã –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é msg —Ç–∏–ø–∞ Message (—É –Ω–∞—Å —ç—Ç–æ –ø—Ä–æ—Å—Ç–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å –æ–¥–Ω–∏–º –ø–æ–ª–µ–º Text).
- require.NoError –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ —Ä–∞—Å–ø–∞—Ä—Å–∏–ª–æ—Å—å –±–µ–∑ –æ—à–∏–±–æ–∫.
- –ò –Ω–∞–∫–æ–Ω–µ—Ü —Å—Ä–∞–≤–Ω–∏–≤–∞–µ–º –ø–æ–ª—É—á–µ–Ω–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É msg —Å —Ç–µ–º, —á—Ç–æ –º—ã –æ–∂–∏–¥–∞–ª–∏ (tc.expectedBody).


#### –†–µ–∑—É–ª—å—Ç–∞—Ç
- –ï—Å–ª–∏ –≤—Å—ë —Å–æ–≤–ø–∞–ª–æ (–∫–æ–¥, –∑–∞–≥–æ–ª–æ–≤–æ–∫, JSON-—Ç–µ–ª–æ), —Ç–µ—Å—Ç —Å—á–∏—Ç–∞–µ—Ç—Å—è –ø—Ä–æ–π–¥–µ–Ω–Ω—ã–º.
- –ï—Å–ª–∏ —Ö–æ—Ç—å —á—Ç–æ-—Ç–æ –Ω–µ —Å–æ–≤–ø–∞–ª–æ, require —Å—Ä–∞–∑—É –≤—ã–≤–µ–¥–µ—Ç –æ—à–∏–±–∫—É —Å –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç—è–º–∏, –∫–∞–∫–æ–π –∏–º–µ–Ω–Ω–æ —á–µ–∫ –ø—Ä–æ–≤–∞–ª–∏–ª—Å—è.

#### –ì–¥–µ —Ç–∞–∫–æ–µ –≤—Å—Ç—Ä–µ—á–∞–µ—Ç—Å—è?
- –í –ª—é–±–æ–º Go-–ø—Ä–æ–µ–∫—Ç–µ, –≥–¥–µ –µ—Å—Ç—å HTTP-—Å–µ—Ä–≤–µ—Ä—ã –∏ —Ö–æ—á–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä—è—Ç—å API-—ç–Ω–¥–æ–∏–Ω—Ç—ã –±–µ–∑ –ø–æ–¥–Ω—è—Ç–∏—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ –∏ –±–µ–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö —Å–µ—Ç–µ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤.
- –û—Å–æ–±–µ–Ω–Ω–æ —á–∞—Å—Ç–æ —ç—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–º Gin (–∏–ª–∏ –ø–æ—Ö–æ–∂–∏–º–∏), –Ω–æ –ø—Ä–∏–Ω—Ü–∏–ø –≤ —Ü–µ–ª–æ–º –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π: —ç–º—É–ª–∏—Ä—É–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç, –ø–µ—Ä–µ–¥–∞—ë–º –∑–∞–ø—Ä–æ—Å –≤ —Ö–µ–Ω–¥–ª–µ—Ä –∏ —Å–º–æ—Ç—Ä–∏–º, —á—Ç–æ –æ–Ω ‚Äú–Ω–∞–ø–∏—à–µ—Ç‚Äù –≤ –æ—Ç–≤–µ—Ç.

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, —ç—Ç–æ—Ç —Ç–µ—Å—Ç ‚Äî —ç—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ HelloHandler –≤—Å–µ–≥–¥–∞ –æ—Ç–¥–∞—ë—Ç —Ä–æ–≤–Ω–æ —Ç–æ, —á—Ç–æ –º—ã –æ—Ç –Ω–µ–≥–æ –æ–∂–∏–¥–∞–µ–º, –≤ –ª—é–±—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö.


### –ß—Ç–æ –¥–µ–ª–∞—Ç—å —Å–æ swagger —Ä–æ—É—Ç–æ–º
–ü–æ–∫—Ä—ã–≤–∞—Ç—å —Ç–µ—Å—Ç–∞–º–∏ –º–∞—Ä—à—Ä—É—Ç Swagger ‚Äî –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∏, –∫–∞–∫ –ø—Ä–∞–≤–∏–ª–æ, –Ω–µ—Ü–µ–ª–µ—Å–æ–æ–±—Ä–∞–∑–Ω–æ. –í–æ—Ç –ø–æ—á–µ–º—É:

üîç –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–∞
–≠—Ç–æ—Ç –º–∞—Ä—à—Ä—É—Ç —Å–ª—É–∂–∏—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è UI –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ ‚Äî –æ–Ω –Ω–µ —Ä–µ–∞–ª–∏–∑—É–µ—Ç –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É –∏ –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –ø–æ–≤–µ–¥–µ–Ω–∏–µ API.

–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ Swagger –∏ –µ—ë –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ WrapHandler —É–∂–µ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤ —Ä–∞–º–∫–∞—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫–∏, –∫–æ—Ç–æ—Ä—É—é –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ.

‚úÖ –ö–æ–≥–¥–∞ —Å—Ç–æ–∏—Ç –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å
–ï—Å–ª–∏ –≤—ã –∫–∞—Å—Ç–æ–º–∏–∑–∏—Ä–æ–≤–∞–ª–∏ –ø–æ–≤–µ–¥–µ–Ω–∏–µ Swagger UI ‚Äî –Ω–∞–ø—Ä–∏–º–µ—Ä, –∏–∑–º–µ–Ω–∏–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å, –¥–æ–±–∞–≤–∏–ª–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é, –≤–Ω–µ–¥—Ä–∏–ª–∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫—É—é –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ ‚Äî —Ç–æ–≥–¥–∞ —Ç–µ—Å—Ç—ã –º–æ–≥—É—Ç –±—ã—Ç—å –ø–æ–ª–µ–∑–Ω—ã.

–í —Å–ª—É—á–∞–µ CI/CD –º–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –º–∞—Ä—à—Ä—É—Ç —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ –æ—Ç–¥–∞—ë—Ç 200 OK, —á—Ç–æ–±—ã —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –Ω–∞ –¥–µ–ø–ª–æ–µ.

üß™ –ü—Ä–∏–º–µ—Ä –ø—Ä–æ—Å—Ç–æ–≥–æ smoke-—Ç–µ—Å—Ç–∞
–ï—Å–ª–∏ –≤—Å—ë –∂–µ —Ö–æ—á–µ—Ç—Å—è –ø–æ–∫—Ä—ã—Ç—å –±–∞–∑–æ–≤–æ–π –ø—Ä–æ–≤–µ—Ä–∫–æ–π:

```go
func TestSwaggerRouteAvailable(t *testing.T) {
    gin.SetMode(gin.TestMode)

    router := gin.New()
    router.GET("/swagger/*any", ginSwagger.WrapHandler(swaggerFiles.Handler))

    ts := httptest.NewServer(router)
    defer ts.Close()

    resp, err := http.Get(ts.URL + "/swagger/index.html")
    require.NoError(t, err)
    require.Equal(t, http.StatusOK, resp.StatusCode)
}
```

üîç –ß—Ç–æ –¥–µ–ª–∞–µ—Ç —ç—Ç–æ—Ç —Ç–µ—Å—Ç
–ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ –º–∞—Ä—à—Ä—É—Ç Swagger –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –¥–æ—Å—Ç—É–ø–µ–Ω.

–£–±–µ–∂–¥–∞–µ—Ç—Å—è, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –Ω–µ –æ—Ç–¥–∞–µ—Ç –æ—à–∏–±–∫—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, 404 –∏–ª–∏ 500).

–ù–µ –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ, —Å—Ç—Ä—É–∫—Ç—É—Ä—É HTML, –≤–µ—Ä—Å–∏—é Swagger ‚Äî —Ç–æ–ª—å–∫–æ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å.

üî• –ü–æ—á–µ–º—É —ç—Ç–æ smoke-—Ç–µ—Å—Ç
–û–Ω –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–Ω—ã–π –∏ –±—ã—Å—Ç—Ä—ã–π ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ "–∂–∏–≤–∞ –ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è".

–ù–µ —É–≥–ª—É–±–ª—è–µ—Ç—Å—è –≤ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É –∏–ª–∏ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏.

–ò–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ—Å–ª–µ —Å–±–æ—Ä–∫–∏, –ø–µ—Ä–µ–¥ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–º –∑–∞–ø—É—Å–∫–æ–º —Ç–µ—Å—Ç–æ–≤.

–ï—Å–ª–∏ –±—ã –º—ã –Ω–∞—á–∞–ª–∏ –≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å HTML, –ø–∞—Ä–∞–º–µ—Ç—Ä—ã Swagger –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏, –∏–ª–∏ –ª–æ–≥–∏–∫—É –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ ‚Äî —ç—Ç–æ –±—ã–ª –±—ã —É–∂–µ integration-—Ç–µ—Å—Ç –∏–ª–∏ –¥–∞–∂–µ UI-—Ç–µ—Å—Ç.

–ù–æ –≤ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Å–ª—É—á–∞–µ–≤ —ç—Ç–æ ‚Äî –Ω–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç. –õ—É—á—à–µ —Å—Ñ–æ–∫—É—Å–∏—Ä–æ–≤–∞—Ç—å—Å—è –Ω–∞ —Ç–µ—Å—Ç–∞—Ö –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏ API, –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤, middleware –∏ –ø—Ä–æ—á–µ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞.

#### –°–º–æ–∫ –ø–æ —à–∞–≥–∞–º
üòä –ü—Ä–µ–¥—Å—Ç–∞–≤—å, —á—Ç–æ –º—ã —Ö–æ—Ç–∏–º –ø—Ä–æ–≤–µ—Ä–∏—Ç—å: —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–∏ —Å—Ç—Ä–∞–Ω–∏—á–∫–∞ Swagger, –≥–¥–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –Ω–∞—à–µ–º—É API. –ú—ã –ø–∏—à–µ–º —Ç–µ—Å—Ç, –ø–æ—Ö–æ–∂–∏–π –Ω–∞ –º–∞–ª–µ–Ω—å–∫–∏–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∏–Ω—Å–ø–µ–∫—Ç–æ—Ä, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–∫—Ä–æ–µ—Ç —ç—Ç—É —Å—Ç—Ä–∞–Ω–∏—Ü—É –∏ —É–±–µ–¥–∏—Ç—Å—è, —á—Ç–æ –æ–Ω–∞ –Ω–µ —Å–ª–æ–º–∞–ª–∞—Å—å.

–í–æ—Ç –∫–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ —à–∞–≥–∞–º ‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø—Ä–æ—Å—Ç–æ:

üß© –®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∏–º –∏–≥—Ä–æ–≤—É—é –ø–ª–æ—â–∞–¥–∫—É
```go
router := gin.New()
router.GET("/swagger/*any", ginSwagger.WrapHandler(swaggerFiles.Handler))
```
‚û°Ô∏è –ú—ã —Å–æ–∑–¥–∞—ë–º –º–∞—Ä—à—Ä—É—Ç—ã, –∫–∞–∫ –±—É–¥—Ç–æ –∑–∞–ø—É—Å–∫–∞–µ–º –º–∏–Ω–∏-—Å–µ—Ä–≤–µ—Ä Gin –ø—Ä—è–º–æ –≤–Ω—É—Ç—Ä–∏ —Ç–µ—Å—Ç–∞.

üß© –®–∞–≥ 2: –í–∫–ª—é—á–∞–µ–º –º–∏–Ω–∏-—Å–µ—Ä–≤–µ—Ä
```go
ts := httptest.NewServer(router)
defer ts.Close()
```

‚û°Ô∏è –¢—É—Ç –º—ã –∑–∞–ø—É—Å–∫–∞–µ–º —Ç–µ—Å—Ç–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä, –æ–Ω –Ω–∞—Å—Ç–æ—è—â–∏–π, –Ω–æ –≤—Ä–µ–º–µ–Ω–Ω—ã–π –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–µ—Å—Ç–∞. –ü–æ—Å–ª–µ —Ç–µ—Å—Ç–∞ —Å–∞–º –≤—ã–∫–ª—é—á–∏—Ç—Å—è.

üß© –®–∞–≥ 3: –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å –∫–∞–∫ –±—É–¥—Ç–æ –∏–∑ –±—Ä–∞—É–∑–µ—Ä–∞
```go
resp, err := http.Get(ts.URL + "/swagger/index.html")
```

‚û°Ô∏è –≠—Ç–æ –∫–∞–∫ –æ—Ç–∫—Ä—ã—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ –∞–¥—Ä–µ—Å: http://—Ç–µ—Å—Ç–æ–≤—ã–π-—Å–µ—Ä–≤–µ—Ä/swagger/index.html –∏ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å, —á—Ç–æ –≤–µ—Ä–Ω—ë—Ç—Å—è.

üß© –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ —Å–ª–æ–º–∞–ª–æ—Å—å –ª–∏
```go
require.NoError(t, err)
require.Equal(t, http.StatusOK, resp.StatusCode)
```
‚û°Ô∏è –ú—ã –≥–æ–≤–æ—Ä–∏–º:

- üí¨ ‚Äú–û—à–∏–±–æ–∫ –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å‚Äù
- üü¢ ‚Äú–°—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–æ–ª–∂–Ω–∞ –æ—Ç–≤–µ—Ç–∏—Ç—å –∫–æ–¥–æ–º 200 OK, —Ç–æ –µ—Å—Ç—å ‚Äò–≤—Å—ë —Ö–æ—Ä–æ—à–æ!‚Äô‚Äù

üß© –®–∞–≥ 5: –í–∫–ª—é—á–∞–µ–º "—Ä–µ–∂–∏–º —Ç–∏—à–∏–Ω—ã"
```go
gin.SetMode(gin.TestMode)
```
‚û°Ô∏è –≠—Ç–æ –∫–∞–∫ –Ω–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É ‚Äú–¢–µ—Å—Ç‚Äù ‚Äî –≤—ã–∫–ª—é—á–∞–µ–º –ª–∏—à–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –∫–æ–Ω—Å–æ–ª—å, —á—Ç–æ–±—ã –æ–Ω–∏ –Ω–µ –º–µ—à–∞–ª–∏ —Ç–µ—Å—Ç—É.

#### üì¶ –ò—Ç–æ–≥–æ:
- –≠—Ç–æ smoke-—Ç–µ—Å—Ç ‚Äî –æ—á–µ–Ω—å –ø—Ä–æ—Å—Ç–æ–π, –±—ã—Å—Ç—Ä—ã–π –∏ –≤–∞–∂–Ω—ã–π. –û–Ω –≥–æ–≤–æ—Ä–∏—Ç:
- ‚ÄúSwagger –∂–∏–≤? –î–∞! –ú–æ–∂–Ω–æ –¥–≤–∏–≥–∞—Ç—å—Å—è –¥–∞–ª—å—à–µ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –æ—Å—Ç–∞–ª—å–Ω—É—é —Å–∏—Å—Ç–µ–º—É.‚Äù



## –®–∞–≥ 6: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ GitHub Actions

–ß—Ç–æ–±—ã swag —Ä–∞–±–æ—Ç–∞–ª –≤ GitHub Actions, –µ–≥–æ –Ω—É–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Ä—É—á–Ω—É—é –≤ —Ä–∞–º–∫–∞—Ö workflow. –í–æ—Ç –∫–∞–∫ —ç—Ç–æ –¥–µ–ª–∞–µ—Ç—Å—è:
üìå –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:

- go install ‚Äî —Å–∫–∞—á–∏–≤–∞–µ—Ç –∏ —Å—Ç–∞–≤–∏—Ç swag CLI.
- $GITHUB_PATH ‚Äî –¥–æ–±–∞–≤–ª—è–µ—Ç –ø—É—Ç—å –∫ –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º —Ñ–∞–π–ª–∞–º Go (~/go/bin) –≤ PATH, —á—Ç–æ–±—ã —Å–ª–µ–¥—É—é—â–∞—è –∫–æ–º–∞–Ω–¥–∞ –º–æ–≥–ª–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å swag.

–û–±–Ω–æ–≤–∏—Ç–µ —Ñ–∞–π–ª .github/workflows/ci.yml, —á—Ç–æ–±—ã –≤–∫–ª—é—á–∏—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ Swagger:
```yaml

name: CI

on:
  push:
    branches:
      - main
  pull_request:
    branches:
      - main

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout code
      uses: actions/checkout@v2

    - name: Set up Go
      uses: actions/setup-go@v2
      with:
        go-version: '1.23'

    - name: Install Swagger
      run: |
          go install github.com/swaggo/swag/cmd/swag@v1.8.12
          echo "$(go env GOPATH)/bin" >> $GITHUB_PATH

    - name: Swag version
      run: swag --version

    - name: Generate Swagger docs
      run: swag init

    - name: Build
      run: go build -v ./...

    - name: Test
      run: go test -v ./...
```
## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ
–¢–µ–ø–µ—Ä—å —É –≤–∞—Å –µ—Å—Ç—å –ø—Ä–æ—Å—Ç–æ–π REST API –Ω–∞ Go —Å –ø–∞—Ä–æ–π —Ö–µ–Ω–¥–ª–µ—Ä–æ–≤, –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º –Ω–∞–±–æ—Ä–æ–º —Ç–µ—Å—Ç–æ–≤ (—é–Ω–∏—Ç —Ç–∞–±–ª–∏—á–Ω—ã–µ –∏ —Å–º–æ–∫), –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π Swagger –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º GitHub Actions –¥–ª—è CI/CD. –í—ã –º–æ–∂–µ—Ç–µ —Ä–∞—Å—à–∏—Ä—è—Ç—å —ç—Ç–æ—Ç –ø—Ä–∏–º–µ—Ä, –¥–æ–±–∞–≤–ª—è—è –±–æ–ª—å—à–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏, —Ç–µ—Å—Ç–æ–≤ –∏ —É–ª—É—á—à–µ–Ω–∏–π –ø–æ –º–µ—Ä–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.


# –ß–∞—Å—Ç—å 3
–¥–∞–≤–∞–π —Ç–µ–ø–µ—Ä—å –¥–æ–±–∞–≤–∏–º docker –∫ —ç—Ç–æ–º—É –ø—Ä–æ–µ–∫—Ç—É

–î–∞–≤–∞–π—Ç–µ –¥–æ–±–∞–≤–∏–º Docker –≤ –Ω–∞—à –ø—Ä–æ–µ–∫—Ç. –ú—ã —Å–æ–∑–¥–∞–¥–∏–º Dockerfile –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏–∏ –Ω–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ –æ–±–Ω–æ–≤–∏–º GitHub Actions –¥–ª—è —Å–±–æ—Ä–∫–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ.

## –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ Dockerfile
–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª Dockerfile –≤ –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞ –∏ –¥–æ–±–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–π –∫–æ–¥:
```sh
# –ò—Å–ø–æ–ª—å–∑—É–µ–º –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–∑ Go –∫–∞–∫ –±–∞–∑–æ–≤—ã–π –æ–±—Ä–∞–∑
FROM golang:1.18-alpine

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ä–∞–±–æ—á—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
WORKDIR /app

# –ö–æ–ø–∏—Ä—É–µ–º go.mod –∏ go.sum —Ñ–∞–π–ª—ã
COPY go.mod go.sum ./

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
RUN go mod download

# –ö–æ–ø–∏—Ä—É–µ–º –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
COPY . .

# –°–æ–±–∏—Ä–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
RUN go build -o main .

# –£–∫–∞–∑—ã–≤–∞–µ–º, —á—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –±—É–¥–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å —Å–æ–±—Ä–∞–Ω–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
CMD ["./main"]
```


## –®–∞–≥ 2: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ GitHub Actions
–û–±–Ω–æ–≤–∏—Ç–µ —Ñ–∞–π–ª .github/workflows/ci.yml, —á—Ç–æ–±—ã –≤–∫–ª—é—á–∏—Ç—å —Å–±–æ—Ä–∫—É –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ:
```yaml

name: CI

on:
  push:
    branches:
      - main
  pull_request:
    branches:
      - main

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout code
      uses: actions/checkout@v2

    - name: Set up Go
      uses: actions/setup-go@v2
      with:
        go-version: '1.18'

    - name: Install Swag
      run: go get -u github.com/swaggo/swag/cmd/swag

    - name: Generate Swagger docs
      run: swag init

    - name: Build Docker image
      run: docker build -t go-rest-api .

    - name: Run tests in Docker container
      run: docker run --rm go-rest-api go test -v ./...

    - name: Run application in Docker container
      run: docker run --rm -p 8080:8080 go-rest-api
```

–®–∞–≥ 3: –ó–∞–ø—É—Å–∫ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–∫–∞–ª—å–Ω–æ
–°–æ–±–µ—Ä–∏—Ç–µ Docker –æ–±—Ä–∞–∑ –ª–æ–∫–∞–ª—å–Ω–æ:
```sh

docker build -t go-rest-api .
```

–ó–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä:
```sh
docker run --rm -p 8080:8080 go-rest-api
```

–û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ –∞–¥—Ä–µ—Å–∞–º http://localhost:8080/hello –∏ http://localhost:8080/goodbye, —á—Ç–æ–±—ã —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ API —Ä–∞–±–æ—Ç–∞–µ—Ç.

–û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ –∞–¥—Ä–µ—Å—É http://localhost:8080/swagger/index.html, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é Swagger.

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ
–¢–µ–ø–µ—Ä—å —É –≤–∞—Å –µ—Å—Ç—å –ø—Ä–æ—Å—Ç–æ–π REST API –Ω–∞ Go —Å –ø–∞—Ä–æ–π —Ö–µ–Ω–¥–ª–µ—Ä–æ–≤, –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º –Ω–∞–±–æ—Ä–æ–º —Ç–µ—Å—Ç–æ–≤, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π Swagger –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏, Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏–µ–π –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º GitHub Actions –¥–ª—è CI/CD. –í—ã –º–æ–∂–µ—Ç–µ —Ä–∞—Å—à–∏—Ä—è—Ç—å —ç—Ç–æ—Ç –ø—Ä–∏–º–µ—Ä, –¥–æ–±–∞–≤–ª—è—è –±–æ–ª—å—à–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏, —Ç–µ—Å—Ç–æ–≤ –∏ —É–ª—É—á—à–µ–Ω–∏–π –ø–æ –º–µ—Ä–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.


# –ß–∞—Å—Ç—å 4
–æ—Ñ–æ—Ä–º–∏ —Ç–µ–ø–µ—Ä—å —ç—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –≤ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–º –≥–æ—à–Ω–æ–º —Å—Ç–∏–ª–µ —Å –ø–∞–ø–∫–∞–º–∏ cmd, internal –∏ –ø—Ä–æ—á–µ–µ

–î–∞–≤–∞–π—Ç–µ —Ä–µ–æ—Ä–≥–∞–Ω–∏–∑—É–µ–º –ø—Ä–æ–µ–∫—Ç –≤ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–º Go —Å—Ç–∏–ª–µ, –∏—Å–ø–æ–ª—å–∑—É—è –ø–∞–ø–∫–∏ cmd, internal, pkg –∏ docs. –≠—Ç–æ –ø–æ–º–æ–∂–µ—Ç –ª—É—á—à–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥ –∏ —Å–¥–µ–ª–∞—Ç—å –µ–≥–æ –±–æ–ª–µ–µ –º–æ–¥—É–ª—å–Ω—ã–º –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–º.

go-rest-api/
‚îú‚îÄ‚îÄ cmd/
‚îÇ   ‚îî‚îÄ‚îÄ main.go
‚îú‚îÄ‚îÄ internal/
‚îÇ   ‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ handler.go
‚îÇ   ‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ config.go
‚îÇ   ‚îî‚îÄ‚îÄ swagger/
‚îÇ       ‚îî‚îÄ‚îÄ docs.go
‚îú‚îÄ‚îÄ pkg/
‚îÇ   ‚îî‚îÄ‚îÄ utils/
‚îÇ       ‚îî‚îÄ‚îÄ utils.go
‚îú‚îÄ‚îÄ docs/
‚îÇ   ‚îî‚îÄ‚îÄ swagger.json
‚îú‚îÄ‚îÄ tests/
‚îÇ   ‚îî‚îÄ‚îÄ main_test.go
‚îú‚îÄ‚îÄ Dockerfile
‚îú‚îÄ‚îÄ go.mod
‚îú‚îÄ‚îÄ go.sum
‚îî‚îÄ‚îÄ .github/
    ‚îî‚îÄ‚îÄ workflows/
        ‚îî‚îÄ‚îÄ ci.yml


–°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–æ–≤
cmd/main.go

package main

import (
    "github.com/gin-gonic/gin"
    "go-rest-api/internal/api"
    "go-rest-api/internal/swagger"
)

func main() {
    router := gin.Default()

    api.RegisterHandlers(router)
    swagger.SwaggerInit(router)

    router.Run(":8080")
}


–°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–æ–≤
internal/api/handler.go

package api

import (
    "net/http"
    "github.com/gin-gonic/gin"
)

type Message struct {
    Text string `json:"text"`
}

func HelloHandler(c *gin.Context) {
    message := Message{Text: "Hello, World!"}
    c.JSON(http.StatusOK, message)
}

func GoodbyeHandler(c *gin.Context) {
    message := Message{Text: "Goodbye, World!"}
    c.JSON(http.StatusOK, message)
}

func RegisterHandlers(router *gin.Engine) {
    router.GET("/hello", HelloHandler)
    router.GET("/goodbye", GoodbyeHandler)
}

–°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–æ–≤
internal/swagger/docs.go
package swagger

import (
    "github.com/swaggo/gin-swagger"
    "github.com/swaggo/files"
    "github.com/gin-gonic/gin"
)

// @title Swagger Example API
// @version 1.0
// @description This is a sample server Petstore server.
// @termsOfService http://swagger.io/terms/

// @contact.name API Support
// @contact.url http://www.swagger.io/support
// @contact.email support@swagger.io

// @license.name Apache 2.0
// @license.url http://www.apache.org/licenses/LICENSE-2.0.html

// @host localhost:8080
// @BasePath /api/v1

// @securityDefinitions.basic BasicAuth

// @externalDocs.description OpenAPI
// @externalDocs.url http://swagger.io

func SwaggerInit(router *gin.Engine) {
    router.GET("/swagger/*any", ginSwagger.WrapHandler(swaggerFiles.Handler))
}



–°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–æ–≤
tests/main_test.go


–°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–æ–≤
–°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–æ–≤
–°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–æ–≤
